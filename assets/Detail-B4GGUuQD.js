import{_ as ce,f as re,e as pe,r as _,A as _e,m as fe,g as u,o as v,c as w,b as a,d as e,w as t,k as o,t as n,h,p as L,x as me,B as ve,y as ge,q as D,C as ye,F as be,n as he,D as Ce,E as p}from"./index-BoCTFli4.js";const ke={class:"patient-detail"},we={class:"detail-layout"},Te={class:"detail-left"},Ne={class:"card-header"},Ve={class:"operation-section"},Ee={class:"card-header"},Ie={class:"card-header"},Le={class:"status-item"},Ue={class:"status-item"},$e={class:"status-item"},xe={class:"detail-right"},Re={class:"content-main"},Se={class:"tools-grid"},De={class:"records-section"},Ge={key:0},Xe={key:2},ze={class:"devices-section"},Ae={class:"devices-header"},Be={class:"log-section"},Pe={class:"log-header"},He={class:"header-actions"},Fe={class:"log-list"},Ke={class:"timeline"},Me={class:"log-time"},qe={class:"log-content"},je={class:"log-message"},Je={class:"log-status"},Oe={__name:"Detail",setup(Qe){const G=re(),U=pe(),$=_("visits"),m=_({patientNo:"P202401001",name:"张三",gender:"男",age:35,phone:"13800138000",idCard:"310101198801011234",hospital:"第一人民医院",address:"上海市XX区XX路XX号"}),C=_({ecgUrl:"http://192.168.1.100:8080",ecgUsername:"admin",ecgPassword:"******",unionApi:"https://api.medical-union.com",apiKey:"sk-123456789",apiVersion:"1.0"}),g=_({ecgConnected:!0,unionConnected:!0,hisConnected:!1}),X=_([{id:1,deviceNo:"ECG001",deviceName:"心电图机1号",hospital:"第一人民医院",ip:"192.168.1.100",lastLoginTime:"2024-03-14 10:00:00",status:"1"},{id:2,deviceNo:"ECG002",deviceName:"心电图机2号",hospital:"第二人民医院",ip:"192.168.1.101",lastLoginTime:"2024-03-14 09:30:00",status:"0"}]),z=_([{visitTime:"2024-03-10",department:"心内科",doctor:"李医生",diagnosis:"冠心病，需要进一步检查",status:"已完成"}]),A=_([{ecgId:"ECG20240310001",recordTime:"2024-03-10 09:30:00",deviceNo:"ECG-001",deviceName:"心电图机1号",doctor:"张医生",result:"窦性心律不齐",diagnosis:"窦性心律不齐，建议进一步检查",status:"已审核",shared:!0,reportType:"pdf",reportUrl:"/path/to/report.pdf"},{ecgId:"ECG20240314001",recordTime:"2024-03-14 10:30:00",deviceNo:"ECG-002",deviceName:"心电图机2号",doctor:"李医生",result:"疑似心肌缺血",diagnosis:"",status:"待判读",shared:!1}]),B=i=>({已完成:"success",进行中:"warning",已取消:"danger"})[i]||"info",P=i=>({已审核:"success",待判读:"warning",待检查:"info"})[i]||"info",H=()=>{p.info("编辑功能开发中")},F=i=>{p.success(`${i.deviceName}连接测试正常`)},K=()=>{p.success("医共体上传测试成功")},M=()=>{p.warning("HIS连接超时")},q=()=>{p.success("判读功能测试正常")},j=()=>{p.info("编辑配置功能开发中")},J=()=>{p.success("状态已更新")},O=()=>{p.success("设备列表已更新")},Q=i=>{p.success(`开始使用${i.deviceName}进行检查`)},W=i=>{p.info("查看就诊记录详情")},Y=i=>{U.push(`/ecg/${i.ecgId}`)},Z=i=>{if(!i.reportUrl){p.warning("报告生成中，请稍后查看");return}window.open(i.reportUrl)},ee=i=>{p.success("上传成功"),i.shared=!0};_(null);const te=i=>{U.push(`/ecg/${i.ecgId}/diagnosis`)},T=_(""),x=_([{id:1,time:"2024-03-14 10:00:00",type:"visit",message:"拉取就诊记录",status:"success"},{id:2,time:"2024-03-14 10:05:00",type:"ecg",message:"上传心电图数据",status:"success"},{id:3,time:"2024-03-14 10:10:00",type:"diagnosis",message:"心电图判读完成",status:"success"},{id:4,time:"2024-03-14 10:15:00",type:"union",message:"上传医共体平台",status:"failed"}]),se=_e(()=>T.value?x.value.filter(i=>i.type===T.value):x.value),le=i=>({visit:"info",ecg:"success",diagnosis:"warning",union:"primary"})[i]||"info",ae=i=>({visit:"就诊记录",ecg:"心电图",diagnosis:"判读",union:"医共体"})[i]||i,oe=()=>{p.success("日志已更新")};return fe(()=>{G.params.id}),(i,s)=>{const c=u("el-button"),r=u("el-descriptions-item"),R=u("el-descriptions"),N=u("el-card"),y=u("el-icon"),f=u("el-tag"),E=u("el-col"),ne=u("el-row"),d=u("el-table-column"),I=u("el-table"),V=u("el-tab-pane"),ie=u("el-link"),S=u("el-button-group"),k=u("el-option"),de=u("el-select"),ue=u("el-tabs");return v(),w("div",ke,[a("div",we,[a("div",Te,[e(N,{class:"info-card"},{header:t(()=>[a("div",Ne,[s[3]||(s[3]=a("span",{class:"section-title"},"基本信息",-1)),e(c,{type:"primary",link:"",onClick:H},{default:t(()=>s[2]||(s[2]=[o("编辑")])),_:1})])]),default:t(()=>[e(R,{column:1,border:""},{default:t(()=>[e(r,{label:"患者编号"},{default:t(()=>[o(n(m.value.patientNo),1)]),_:1}),e(r,{label:"姓名"},{default:t(()=>[o(n(m.value.name),1)]),_:1}),e(r,{label:"性别"},{default:t(()=>[o(n(m.value.gender),1)]),_:1}),e(r,{label:"年龄"},{default:t(()=>[o(n(m.value.age)+"岁",1)]),_:1}),e(r,{label:"手机号"},{default:t(()=>[o(n(m.value.phone),1)]),_:1}),e(r,{label:"身份证号"},{default:t(()=>[o(n(m.value.idCard),1)]),_:1}),e(r,{label:"所属医院"},{default:t(()=>[o(n(m.value.hospital),1)]),_:1}),e(r,{label:"地址",span:2},{default:t(()=>[o(n(m.value.address),1)]),_:1})]),_:1})]),_:1}),a("div",Ve,[e(N,{class:"info-card"},{header:t(()=>[a("div",Ee,[s[5]||(s[5]=a("span",{class:"section-title"},"配置信息",-1)),e(c,{type:"primary",link:"",onClick:j},{default:t(()=>s[4]||(s[4]=[o("编辑配置")])),_:1})])]),default:t(()=>[e(R,{column:1,border:""},{default:t(()=>[e(r,{label:"心电图机URL",span:2},{default:t(()=>[o(n(C.value.ecgUrl),1)]),_:1}),e(r,{label:"账号"},{default:t(()=>[o(n(C.value.ecgUsername),1)]),_:1}),e(r,{label:"密码"},{default:t(()=>s[6]||(s[6]=[o("******")])),_:1}),e(r,{label:"医共体API",span:2},{default:t(()=>[o(n(C.value.unionApi),1)]),_:1}),e(r,{label:"API密钥"},{default:t(()=>[o(n(C.value.apiKey),1)]),_:1}),e(r,{label:"密钥版本"},{default:t(()=>[o("v"+n(C.value.apiVersion),1)]),_:1})]),_:1})]),_:1}),e(N,{class:"info-card"},{header:t(()=>[a("div",Ie,[s[8]||(s[8]=a("span",{class:"section-title"},"运行状态",-1)),e(c,{type:"primary",link:"",onClick:J},{default:t(()=>[e(y,null,{default:t(()=>[e(h(L))]),_:1}),s[7]||(s[7]=o("刷新 "))]),_:1})])]),default:t(()=>[e(ne,{gutter:20},{default:t(()=>[e(E,{span:8},{default:t(()=>[a("div",Le,[s[9]||(s[9]=a("div",{class:"status-label"},"心电图机连接",-1)),e(f,{type:g.value.ecgConnected?"success":"danger"},{default:t(()=>[o(n(g.value.ecgConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1}),e(E,{span:8},{default:t(()=>[a("div",Ue,[s[10]||(s[10]=a("div",{class:"status-label"},"医共体连接",-1)),e(f,{type:g.value.unionConnected?"success":"danger"},{default:t(()=>[o(n(g.value.unionConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1}),e(E,{span:8},{default:t(()=>[a("div",$e,[s[11]||(s[11]=a("div",{class:"status-label"},"HIS连接",-1)),e(f,{type:g.value.hisConnected?"success":"danger"},{default:t(()=>[o(n(g.value.hisConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1})]),_:1})]),_:1})])]),a("div",xe,[a("div",Re,[e(N,{class:"info-card tools-card"},{header:t(()=>s[12]||(s[12]=[a("div",{class:"card-header"},[a("span",{class:"section-title"},"快捷工具")],-1)])),default:t(()=>[a("div",Se,[e(c,{type:"success",onClick:K},{default:t(()=>[e(y,null,{default:t(()=>[e(h(me))]),_:1}),s[13]||(s[13]=a("span",null,"医共体上传测试",-1))]),_:1}),e(c,{type:"warning",onClick:M},{default:t(()=>[e(y,null,{default:t(()=>[e(h(ve))]),_:1}),s[14]||(s[14]=a("span",null,"HIS拉取测试",-1))]),_:1}),e(c,{type:"info",onClick:q},{default:t(()=>[e(y,null,{default:t(()=>[e(h(ge))]),_:1}),s[15]||(s[15]=a("span",null,"判读测试",-1))]),_:1})])]),_:1}),a("div",De,[e(ue,{modelValue:$.value,"onUpdate:modelValue":s[1]||(s[1]=l=>$.value=l)},{default:t(()=>[e(V,{label:"就诊记录",name:"visits"},{default:t(()=>[e(I,{data:z.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"visitTime",label:"就诊时间",width:"180"}),e(d,{prop:"department",label:"就诊科室",width:"120"}),e(d,{prop:"doctor",label:"主治医生",width:"120"}),e(d,{prop:"diagnosis",label:"诊断结果","show-overflow-tooltip":""}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:B(l.status)},{default:t(()=>[o(n(l.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"150",fixed:"right"},{default:t(({row:l})=>[e(c,{link:"",type:"primary",onClick:b=>W(l)},{default:t(()=>s[16]||(s[16]=[o("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(V,{label:"心电图记录",name:"ecg"},{default:t(()=>[e(I,{data:A.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"ecgId",label:"心电图ID",width:"120"},{default:t(({row:l})=>[e(ie,{type:"primary",onClick:b=>Y(l)},{default:t(()=>[o(n(l.ecgId),1)]),_:2},1032,["onClick"])]),_:1}),e(d,{prop:"recordTime",label:"记录时间",width:"180"}),e(d,{prop:"deviceNo",label:"设备编号",width:"120"}),e(d,{prop:"deviceName",label:"设备名称",width:"150"}),e(d,{prop:"doctor",label:"检查医生",width:"120"}),e(d,{prop:"result",label:"分析结果","show-overflow-tooltip":""}),e(d,{prop:"diagnosis",label:"医生诊断","show-overflow-tooltip":""},{default:t(({row:l})=>[l.diagnosis?(v(),w("span",Ge,n(l.diagnosis),1)):l.status==="待判读"?(v(),D(c,{key:1,link:"",type:"primary",onClick:b=>te(l)},{default:t(()=>s[17]||(s[17]=[o(" 去判读 ")])),_:2},1032,["onClick"])):(v(),w("span",Xe,"-"))]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:P(l.status)},{default:t(()=>[o(n(l.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"shared",label:"共享状态",width:"100"},{default:t(({row:l})=>[e(f,{type:l.shared?"success":"info"},{default:t(()=>[o(n(l.shared?"已共享":"未共享"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(S,null,{default:t(()=>[e(c,{link:"",type:"primary",onClick:b=>Z(l)},{default:t(()=>s[18]||(s[18]=[o("查看报告")])),_:2},1032,["onClick"]),l.shared?ye("",!0):(v(),D(c,{key:0,link:"",type:"primary",onClick:b=>ee(l)},{default:t(()=>s[19]||(s[19]=[o(" 上传共享 ")])),_:2},1032,["onClick"]))]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),e(V,{label:"可用设备",name:"devices"},{default:t(()=>[a("div",ze,[a("div",Ae,[e(c,{type:"primary",size:"small",onClick:O},{default:t(()=>[e(y,null,{default:t(()=>[e(h(L))]),_:1}),s[20]||(s[20]=o("刷新 "))]),_:1})]),e(I,{data:X.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"deviceNo",label:"设备编号",width:"120"}),e(d,{prop:"deviceName",label:"设备名称",width:"150"}),e(d,{prop:"hospital",label:"所属医院",width:"150"}),e(d,{prop:"ip",label:"IP地址",width:"130"}),e(d,{prop:"lastLoginTime",label:"最后登录",width:"180"}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:l.status==="1"?"success":"danger"},{default:t(()=>[o(n(l.status==="1"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(S,null,{default:t(()=>[e(c,{link:"",type:"primary",disabled:l.status!=="1",onClick:b=>Q(l)},{default:t(()=>s[21]||(s[21]=[o(" 开始检查 ")])),_:2},1032,["disabled","onClick"]),e(c,{link:"",type:"primary",onClick:b=>F(l)},{default:t(()=>s[22]||(s[22]=[o(" 测试连接 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])])]),_:1}),e(V,{label:"运行日志",name:"logs"},{default:t(()=>[a("div",Be,[a("div",Pe,[a("div",He,[e(de,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=l=>T.value=l),placeholder:"日志类型",size:"small",style:{width:"120px"}},{default:t(()=>[e(k,{label:"全部",value:""}),e(k,{label:"就诊记录",value:"visit"}),e(k,{label:"心电图",value:"ecg"}),e(k,{label:"判读",value:"diagnosis"}),e(k,{label:"医共体",value:"union"})]),_:1},8,["modelValue"]),e(c,{type:"primary",link:"",onClick:oe},{default:t(()=>[e(y,null,{default:t(()=>[e(h(L))]),_:1}),s[23]||(s[23]=o("刷新 "))]),_:1})])]),a("div",Fe,[a("div",Ke,[(v(!0),w(be,null,he(se.value,l=>(v(),w("div",{key:l.id,class:"log-item"},[s[24]||(s[24]=a("div",{class:"timeline-line"},null,-1)),a("div",{class:Ce(["timeline-dot",l.status==="success"?"success":"error"])},null,2),a("div",Me,n(l.time),1),a("div",qe,[e(f,{size:"small",type:le(l.type),class:"log-type"},{default:t(()=>[o(n(ae(l.type)),1)]),_:2},1032,["type"]),a("span",je,n(l.message),1)]),a("div",Je,[e(f,{size:"small",type:l.status==="success"?"success":"danger"},{default:t(()=>[o(n(l.status==="success"?"成功":"失败"),1)]),_:2},1032,["type"])])]))),128))])])])]),_:1})]),_:1},8,["modelValue"])])])])])])}}},Ye=ce(Oe,[["__scopeId","data-v-a6e364cc"]]);export{Ye as default};
