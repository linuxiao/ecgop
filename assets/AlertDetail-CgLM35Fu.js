import{_ as K,f as O,e as Q,r as v,m as W,g as s,o as m,c as y,d as e,w as t,b as c,q as N,h as X,N as Y,k as o,C,t as n,F as Z,n as ee,E as b}from"./index-0Rub1XVr.js";const te={class:"alert-detail"},le={class:"card-header"},ae={class:"actions"},oe={class:"section mt-16"},ne={key:0,class:"operator"},se={class:"dialog-footer"},ue={__name:"AlertDetail",setup(ie){const T=O(),D=Q(),x=T.params.id,a=v({alertNo:"A202401001",alertTime:"2024-03-14 09:30:00",status:"pending",alertType:"设备离线",level:"严重",deviceNo:"ECG001",content:"设备已离线超过30分钟，请检查网络连接状态",deviceName:"十二导联心电图机",deviceModel:"ECG-1200",deviceStatus:"离线",department:"心内科",location:"心电图室",manager:"张工程师"}),k=v([{time:"2024-03-14 09:30:00",type:"warning",title:"系统告警",content:"设备已离线超过30分钟"},{time:"2024-03-14 09:35:00",type:"info",title:"系统通知",content:"已通知相关负责人"}]),p=v(!1),d=v({type:"",result:""}),S=r=>({pending:"danger",processing:"warning",resolved:"success",closed:"info"})[r]||"info",E=r=>({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[r]||r,A=r=>({严重:"danger",警告:"warning",提示:"info"})[r]||"info",B=r=>({在线:"success",离线:"danger",故障:"warning"})[r]||"info",L=r=>({warning:"warning",success:"success",info:"info"})[r]||"info",M=()=>{D.push(`/devices/ecg/${a.value.deviceNo}`)},$=()=>{p.value=!0},F=()=>{if(!d.value.type){b.warning("请选择处理方式");return}if(!d.value.result){b.warning("请输入处理结果");return}b.success("处理成功"),p.value=!1,a.value.status="resolved",k.value.push({time:new Date().toLocaleString(),type:"success",title:"处理完成",content:d.value.result,operator:"当前用户"}),d.value={type:"",result:""}},I=async()=>{console.log("Loading alert detail for:",x)};return W(()=>{I()}),(r,l)=>{const R=s("el-icon"),_=s("el-button"),i=s("el-descriptions-item"),f=s("el-tag"),U=s("el-link"),w=s("el-descriptions"),G=s("el-timeline-item"),P=s("el-timeline"),g=s("el-option"),h=s("el-select"),V=s("el-form-item"),q=s("el-input"),j=s("el-form"),z=s("el-dialog"),H=s("el-card");return m(),y("div",te,[e(H,{class:"detail-card"},{header:t(()=>[c("div",le,[l[7]||(l[7]=c("span",{class:"title"},"告警详情",-1)),c("div",ae,[a.value.status==="pending"?(m(),N(_,{key:0,type:"primary",onClick:$},{default:t(()=>[e(R,null,{default:t(()=>[e(X(Y))]),_:1}),l[5]||(l[5]=o("处理告警 "))]),_:1})):C("",!0),e(_,{onClick:l[0]||(l[0]=u=>r.$router.back())},{default:t(()=>l[6]||(l[6]=[o("返回")])),_:1})])])]),default:t(()=>[e(w,{title:"告警信息",column:3,border:""},{default:t(()=>[e(i,{label:"告警编号"},{default:t(()=>[o(n(a.value.alertNo),1)]),_:1}),e(i,{label:"告警时间"},{default:t(()=>[o(n(a.value.alertTime),1)]),_:1}),e(i,{label:"状态"},{default:t(()=>[e(f,{type:S(a.value.status)},{default:t(()=>[o(n(E(a.value.status)),1)]),_:1},8,["type"])]),_:1}),e(i,{label:"告警类型"},{default:t(()=>[o(n(a.value.alertType),1)]),_:1}),e(i,{label:"告警级别"},{default:t(()=>[e(f,{type:A(a.value.level)},{default:t(()=>[o(n(a.value.level),1)]),_:1},8,["type"])]),_:1}),e(i,{label:"设备编号"},{default:t(()=>[e(U,{type:"primary",onClick:M},{default:t(()=>[o(n(a.value.deviceNo),1)]),_:1})]),_:1}),e(i,{label:"告警内容",span:3},{default:t(()=>[o(n(a.value.content),1)]),_:1})]),_:1}),e(w,{title:"设备信息",column:3,border:"",class:"mt-16"},{default:t(()=>[e(i,{label:"设备名称"},{default:t(()=>[o(n(a.value.deviceName),1)]),_:1}),e(i,{label:"设备型号"},{default:t(()=>[o(n(a.value.deviceModel),1)]),_:1}),e(i,{label:"设备状态"},{default:t(()=>[e(f,{type:B(a.value.deviceStatus)},{default:t(()=>[o(n(a.value.deviceStatus),1)]),_:1},8,["type"])]),_:1}),e(i,{label:"所属科室"},{default:t(()=>[o(n(a.value.department),1)]),_:1}),e(i,{label:"安装位置"},{default:t(()=>[o(n(a.value.location),1)]),_:1}),e(i,{label:"负责人"},{default:t(()=>[o(n(a.value.manager),1)]),_:1})]),_:1}),c("div",oe,[l[8]||(l[8]=c("div",{class:"section-header"},[c("h3",null,"处理记录")],-1)),e(P,null,{default:t(()=>[(m(!0),y(Z,null,ee(k.value,(u,J)=>(m(),N(G,{key:J,type:L(u.type),timestamp:u.time},{default:t(()=>[c("h4",null,n(u.title),1),c("p",null,n(u.content),1),u.operator?(m(),y("p",ne,"处理人："+n(u.operator),1)):C("",!0)]),_:2},1032,["type","timestamp"]))),128))]),_:1})]),e(z,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=u=>p.value=u),title:"处理告警",width:"500px"},{footer:t(()=>[c("span",se,[e(_,{onClick:l[3]||(l[3]=u=>p.value=!1)},{default:t(()=>l[9]||(l[9]=[o("取消")])),_:1}),e(_,{type:"primary",onClick:F},{default:t(()=>l[10]||(l[10]=[o("确定")])),_:1})])]),default:t(()=>[e(j,{model:d.value,"label-width":"80px"},{default:t(()=>[e(V,{label:"处理方式"},{default:t(()=>[e(h,{modelValue:d.value.type,"onUpdate:modelValue":l[1]||(l[1]=u=>d.value.type=u),placeholder:"请选择处理方式"},{default:t(()=>[e(g,{label:"远程处理",value:"remote"}),e(g,{label:"现场处理",value:"onsite"}),e(g,{label:"转交处理",value:"transfer"})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"处理结果"},{default:t(()=>[e(q,{modelValue:d.value.result,"onUpdate:modelValue":l[2]||(l[2]=u=>d.value.result=u),type:"textarea",rows:"4",placeholder:"请输入处理结果"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})])}}},de=K(ue,[["__scopeId","data-v-3c50ad0a"]]);export{de as default};
