import{_ as j,e as q,r as x,a as F,m as O,g as s,o as w,c as J,d as e,w as t,q as K,h as r,G as I,k as d,x as V,H as D,C as Q,t as h,I as W,E as m}from"./index-BoCTFli4.js";import{B as X}from"./BaseListPage-CEUvZaF8.js";const Z={class:"ecg-list-page"},ee={__name:"EcgList",setup(te){const y=q(),p=x(null),_=x([]),o=F({patientName:"",examTime:[],status:""}),$=a=>({pending:"info",analyzing:"warning",completed:"success",error:"danger"})[a]||"info",z=a=>({pending:"待分析",analyzing:"分析中",completed:"已完成",error:"异常"})[a]||a,b=a=>{p.value&&(p.value.loading=!0,setTimeout(()=>{p.value.tableData=[{ecgId:"ECG202403140001",examTime:"2024-03-14 15:30:00",patientName:"张三",patientId:"P001",patientNo:"P001",deviceNo:"ECG001",examDoctor:"李医生",status:"completed",result:"窦性心律,心率75次/分钟"},{ecgId:"ECG202403140002",examTime:"2024-03-14 14:20:00",patientName:"李四",patientId:"P002",patientNo:"P002",deviceNo:"ECG002",examDoctor:"王医生",status:"analyzing",result:"分析中..."}].filter(l=>{const u=!a.patientName||l.patientName.includes(a.patientName),i=!a.status||l.status===a.status;return u&&i}),p.value.total=p.value.tableData.length,p.value.loading=!1},500))},T=()=>{Object.keys(o).forEach(a=>{o[a]=a==="examTime"?[]:""}),b(o)},E=a=>{_.value=a},k=a=>{y.push(`/ecg/${a.ecgId}`)},P=a=>{m.success(`开始分析: ${a.ecgId}`)},B=a=>{m.success(`开始上传: ${a.ecgId}`)},S=a=>{m.success(`开始下载: ${a.ecgId}`)},G=()=>{m.success(`批量分析 ${_.value.length} 条记录`)},U=()=>{m.success(`批量上传 ${_.value.length} 条记录`)},M=()=>{m.success(`批量下载 ${_.value.length} 条记录`)},R=a=>{y.push({name:"PatientDetail",params:{id:a.patientId}})};return O(()=>{b(o)}),(a,l)=>{const u=s("el-icon"),i=s("el-button"),C=s("el-button-group"),Y=s("el-input"),v=s("el-form-item"),H=s("el-date-picker"),g=s("el-option"),L=s("el-select"),N=s("el-link"),c=s("el-table-column"),A=s("el-tag");return w(),J("div",Z,[e(X,{ref_key:"listPage",ref:p,"search-form":o,selection:!0,onSearch:b,onReset:T,onSelectionChange:E},{toolbar:t(()=>[_.value.length>0?(w(),K(C,{key:0},{default:t(()=>[e(i,{type:"primary",onClick:G},{default:t(()=>[e(u,null,{default:t(()=>[e(r(I))]),_:1}),l[3]||(l[3]=d("批量分析 "))]),_:1}),e(i,{type:"success",onClick:U},{default:t(()=>[e(u,null,{default:t(()=>[e(r(V))]),_:1}),l[4]||(l[4]=d("批量上传 "))]),_:1}),e(i,{type:"warning",onClick:M},{default:t(()=>[e(u,null,{default:t(()=>[e(r(D))]),_:1}),l[5]||(l[5]=d("批量下载 "))]),_:1})]),_:1})):Q("",!0)]),"search-items":t(()=>[e(v,{label:"患者姓名"},{default:t(()=>[e(Y,{modelValue:o.patientName,"onUpdate:modelValue":l[0]||(l[0]=n=>o.patientName=n),placeholder:"请输入患者姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(v,{label:"检查时间"},{default:t(()=>[e(H,{modelValue:o.examTime,"onUpdate:modelValue":l[1]||(l[1]=n=>o.examTime=n),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(v,{label:"状态"},{default:t(()=>[e(L,{modelValue:o.status,"onUpdate:modelValue":l[2]||(l[2]=n=>o.status=n),placeholder:"请选择状态",clearable:""},{default:t(()=>[e(g,{label:"待分析",value:"pending"}),e(g,{label:"分析中",value:"analyzing"}),e(g,{label:"已完成",value:"completed"}),e(g,{label:"异常",value:"error"})]),_:1},8,["modelValue"])]),_:1})]),default:t(()=>[e(c,{prop:"ecgId",label:"心电图ID",width:"150"},{default:t(({row:n})=>[e(N,{type:"primary",onClick:f=>k(n)},{default:t(()=>[d(h(n.ecgId),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{prop:"examTime",label:"检查时间",width:"160",sortable:""}),e(c,{prop:"patientName",label:"患者姓名",width:"120"},{default:t(({row:n})=>[e(N,{type:"primary",onClick:f=>R(n)},{default:t(()=>[d(h(n.patientName),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{prop:"patientNo",label:"患者编号",width:"120"}),e(c,{prop:"deviceNo",label:"设备编号",width:"120"}),e(c,{prop:"examDoctor",label:"检查医生",width:"120"}),e(c,{prop:"status",label:"状态",width:"100"},{default:t(({row:n})=>[e(A,{type:$(n.status)},{default:t(()=>[d(h(z(n.status)),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"操作",width:"240"},{default:t(({row:n})=>[e(C,null,{default:t(()=>[e(i,{size:"small",type:"primary",onClick:f=>k(n)},{default:t(()=>[e(u,null,{default:t(()=>[e(r(W))]),_:1}),l[6]||(l[6]=d("查看 "))]),_:2},1032,["onClick"]),e(i,{size:"small",type:"success",onClick:f=>P(n),disabled:n.status==="analyzing"},{default:t(()=>[e(u,null,{default:t(()=>[e(r(I))]),_:1}),l[7]||(l[7]=d("分析 "))]),_:2},1032,["onClick","disabled"]),e(i,{size:"small",type:"warning",onClick:f=>B(n),disabled:n.status!=="completed"},{default:t(()=>[e(u,null,{default:t(()=>[e(r(V))]),_:1}),l[8]||(l[8]=d("上传 "))]),_:2},1032,["onClick","disabled"]),e(i,{size:"small",onClick:f=>S(n)},{default:t(()=>[e(u,null,{default:t(()=>[e(r(D))]),_:1}),l[9]||(l[9]=d("下载 "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:1}),e(c,{prop:"result",label:"分析结果","min-width":"200","show-overflow-tooltip":""})]),_:1},8,["search-form"])])}}},ne=j(ee,[["__scopeId","data-v-a483062a"]]);export{ne as default};
