import{B as F}from"./BaseListPage-D0QVsjqV.js";import{_ as G,r as y,a as M,m as O,g as r,o as v,c as w,d as e,w as t,b as V,k as i,t as p,q as k,F as P,n as S,C as H}from"./index-C_S8R5SK.js";const q={class:"operation-logs-page"},I={class:"search-form-wrapper"},z={class:"search-row"},A={__name:"Logs",setup(J){const d=y(null),T=y(!1),l=y({}),s=M({operationType:"",deviceNo:"",timeRange:[]}),x=[{id:1,operationType:"设备维护",operator:"张工程师",operationTime:"2024-03-14 09:00:00",deviceNo:"ECG001",deviceName:"心电图机1号",content:"完成常规维护检查，更换传感器",result:"正常",remark:"建议��个月后进行下次维护",images:["https://example.com/image1.jpg","https://example.com/image2.jpg"]},{id:2,operationType:"故障维修",operator:"李工���师",operationTime:"2024-03-14 14:00:00",deviceNo:"ECG002",deviceName:"心电图机2号",content:"处理设备无法开机问题，更换电源模块",result:"已修复",remark:"建议关注电源模块使用情况"},{id:3,operationType:"设备检查",operator:"王工程师",operationTime:"2024-03-14 16:00:00",deviceNo:"ECG003",deviceName:"心电图机3号",content:"进行设备定期检查",result:"异常",remark:"发现数据传输异常，需要进一步检查"}],f=n=>{d.value&&(d.value.loading=!0,setTimeout(()=>{d.value.tableData=x.filter(o=>{const u=!n.operationType||o.operationType===n.operationType,g=!n.deviceNo||o.deviceNo.includes(n.deviceNo);return u&&g}),d.value.total=d.value.tableData.length,d.value.loading=!1},500))},C=()=>{Object.keys(s).forEach(n=>{s[n]=n==="timeRange"?[]:""}),f(s)},h=n=>({设备维护:"success",故障维修:"danger",设备检查:"warning",设备配置:"info"})[n]||"info",N=n=>({正常:"success",已修复:"success",异常:"danger",未修复:"danger",处理中:"warning"})[n]||"info";return O(()=>{f(s)}),(n,o)=>{const u=r("el-option"),g=r("el-select"),b=r("el-form-item"),D=r("el-input"),R=r("el-date-picker"),_=r("el-tag"),m=r("el-table-column"),B=r("el-dropdown-item"),c=r("el-descriptions-item"),L=r("el-image"),E=r("el-descriptions"),U=r("el-dialog");return v(),w("div",q,[e(F,{ref_key:"listPage",ref:d,"search-form":s,onSearch:f,onReset:C},{"search-items":t(()=>[V("div",I,[V("div",z,[e(b,{label:"操作类型"},{default:t(()=>[e(g,{modelValue:s.operationType,"onUpdate:modelValue":o[0]||(o[0]=a=>s.operationType=a),placeholder:"请选择操作类型",clearable:""},{default:t(()=>[e(u,{label:"设备维护",value:"设备维护"}),e(u,{label:"故障维修",value:"故障维修"}),e(u,{label:"设备检查",value:"设备检查"}),e(u,{label:"设备配置",value:"设备配置"})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"设备编号"},{default:t(()=>[e(D,{modelValue:s.deviceNo,"onUpdate:modelValue":o[1]||(o[1]=a=>s.deviceNo=a),placeholder:"请输入设备编号",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{label:"时间范围"},{default:t(()=>[e(R,{modelValue:s.timeRange,"onUpdate:modelValue":o[2]||(o[2]=a=>s.timeRange=a),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})])])]),"dropdown-items":t(({row:a})=>[e(B,{command:"viewDetail"},{default:t(()=>o[4]||(o[4]=[i("查看详情")])),_:1})]),default:t(()=>[e(m,{prop:"operationType",label:"操作类型",width:"120"},{default:t(({row:a})=>[e(_,{type:h(a.operationType),effect:"plain"},{default:t(()=>[i(p(a.operationType),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"operationTime",label:"操作时间",width:"180"}),e(m,{prop:"deviceNo",label:"设备编号",width:"120"}),e(m,{prop:"deviceName",label:"设备名称",width:"150"}),e(m,{prop:"content",label:"操作内容","min-width":"300","show-overflow-tooltip":""}),e(m,{prop:"result",label:"操作结果",width:"100"},{default:t(({row:a})=>[e(_,{type:N(a.result)},{default:t(()=>[i(p(a.result),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["search-form"]),e(U,{modelValue:T.value,"onUpdate:modelValue":o[3]||(o[3]=a=>T.value=a),title:"操作详情",width:"700px"},{default:t(()=>[e(E,{column:2,border:""},{default:t(()=>{var a;return[e(c,{label:"操作类型"},{default:t(()=>[e(_,{type:h(l.value.operationType),effect:"plain"},{default:t(()=>[i(p(l.value.operationType),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"操作时间"},{default:t(()=>[i(p(l.value.operationTime),1)]),_:1}),e(c,{label:"设备编号"},{default:t(()=>[i(p(l.value.deviceNo),1)]),_:1}),e(c,{label:"设备名称"},{default:t(()=>[i(p(l.value.deviceName),1)]),_:1}),e(c,{label:"操作结果"},{default:t(()=>[e(_,{type:N(l.value.result)},{default:t(()=>[i(p(l.value.result),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"操作内容",span:2},{default:t(()=>[i(p(l.value.content),1)]),_:1}),e(c,{label:"备注信息",span:2},{default:t(()=>[i(p(l.value.remark||"-"),1)]),_:1}),(a=l.value.images)!=null&&a.length?(v(),k(c,{key:0,label:"相关图片",span:2},{default:t(()=>[(v(!0),w(P,null,S(l.value.images,(Y,j)=>(v(),k(L,{key:j,src:Y,"preview-src-list":l.value.images,fit:"cover",class:"operation-image"},null,8,["src","preview-src-list"]))),128))]),_:1})):H("",!0)]}),_:1})]),_:1},8,["modelValue"])])}}},W=G(A,[["__scopeId","data-v-d1500a6f"]]);export{W as default};
