import{_ as h,u as k,r as _,a as L,c as R,b as t,d as s,w as r,e as S,f as q,g as l,o as z,h as g,i as B,l as C,j as E,k as F,t as N,E as c}from"./index-BoCTFli4.js";const U={class:"login-container"},K={class:"login-box"},M={__name:"Login",setup(j){const f=S(),w=q(),v=k(),d=_(null),a=_(!1),o=L({username:"",password:""}),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},m=async()=>{if(!a.value)try{if(await d.value.validate(),a.value=!0,await v.login(o.username,o.password)){c.success("登录成功");const e=w.query.redirect||"/dashboard";f.push(e)}else c.error("登录失败，请检查用户名和密码")}catch(n){console.error("Login error:",n),c.error("登录失败，请重试")}finally{a.value=!1}};return(n,e)=>{const p=l("el-input"),u=l("el-form-item"),y=l("el-button"),b=l("el-form"),V=l("el-card");return z(),R("div",U,[t("div",K,[s(V,{class:"login-card"},{default:r(()=>[e[2]||(e[2]=t("div",{class:"title"},[t("h2",null,"后台管理系统"),t("p",{class:"subtitle"},"Admin Management System")],-1)),s(b,{model:o,rules:x,ref_key:"loginFormRef",ref:d,class:"login-form"},{default:r(()=>[s(u,{prop:"username"},{default:r(()=>[s(p,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=i=>o.username=i),placeholder:"请输入用户名","prefix-icon":g(B),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(u,{prop:"password"},{default:r(()=>[s(p,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),type:"password",placeholder:"请输入密码","prefix-icon":g(C),size:"large","show-password":"",onKeyup:E(m,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),s(u,null,{default:r(()=>[s(y,{type:"primary",onClick:m,class:"login-button",size:"large",loading:a.value},{default:r(()=>[F(N(a.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])])}}},D=h(M,[["__scopeId","data-v-4179f2ee"]]);export{D as default};
