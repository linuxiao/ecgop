import{_ as pe,f as _e,e as fe,r as _,A as me,m as ve,g as u,o as v,c as w,b as a,d as e,w as t,k as n,t as i,h,p as R,x as ge,B as be,y as ye,q as D,C as he,F as ke,n as Ce,D as we,E as p}from"./index-C_S8R5SK.js";import{_ as Te}from"./EcgDiagnosis-BMNJi6k2.js";const Ne={class:"patient-detail"},Ve={class:"detail-layout"},Ee={class:"detail-left"},Ie={class:"card-header"},Re={class:"operation-section"},Le={class:"card-header"},Se={class:"card-header"},Ue={class:"status-item"},$e={class:"status-item"},xe={class:"status-item"},De={class:"detail-right"},Ge={class:"content-main"},Xe={class:"tools-grid"},ze={class:"records-section"},Ae={key:0},Be={key:2},Pe={class:"devices-section"},He={class:"devices-header"},Fe={class:"log-section"},Ke={class:"log-header"},Me={class:"header-actions"},qe={class:"log-list"},je={class:"timeline"},Je={class:"log-time"},Oe={class:"log-content"},Qe={class:"log-message"},We={class:"log-status"},Ye={__name:"Detail",setup(Ze){const G=_e(),X=fe(),L=_("visits"),m=_({patientNo:"P202401001",name:"张三",gender:"男",age:35,phone:"13800138000",idCard:"310101198801011234",hospital:"第一人民医院",address:"上海市XX区XX路XX号"}),k=_({ecgUrl:"http://192.168.1.100:8080",ecgUsername:"admin",ecgPassword:"******",unionApi:"https://api.medical-union.com",apiKey:"sk-123456789",apiVersion:"1.0"}),g=_({ecgConnected:!0,unionConnected:!0,hisConnected:!1}),z=_([{id:1,deviceNo:"ECG001",deviceName:"心电图机1号",hospital:"第一人民医院",ip:"192.168.1.100",lastLoginTime:"2024-03-14 10:00:00",status:"1"},{id:2,deviceNo:"ECG002",deviceName:"心电图机2号",hospital:"第二人民医院",ip:"192.168.1.101",lastLoginTime:"2024-03-14 09:30:00",status:"0"}]),A=_([{visitTime:"2024-03-10",department:"心内科",doctor:"李医生",diagnosis:"冠心病，需要进一步检查",status:"已完成"}]),B=_([{ecgId:"ECG20240310001",recordTime:"2024-03-10 09:30:00",deviceNo:"ECG-001",deviceName:"心电图机1号",doctor:"张医生",result:"窦性心律不齐",diagnosis:"窦性心律不齐，建议进一步检查",status:"已审核",shared:!0,reportType:"pdf",reportUrl:"/path/to/report.pdf"},{ecgId:"ECG20240314001",recordTime:"2024-03-14 10:30:00",deviceNo:"ECG-002",deviceName:"心电图机2号",doctor:"李医生",result:"疑似心肌缺血",diagnosis:"",status:"待判读",shared:!1}]),P=o=>({已完成:"success",进行中:"warning",已取消:"danger"})[o]||"info",H=o=>({已审核:"success",待判读:"warning",待检查:"info"})[o]||"info",F=()=>{p.info("编辑功能开发中")},K=o=>{p.success(`${o.deviceName}连接测试正常`)},M=()=>{p.success("医共体上传测试成功")},q=()=>{p.warning("HIS连接超时")},j=()=>{p.success("判读功能测试正常")},J=()=>{p.info("编辑配置功能开发中")},O=()=>{p.success("状态已更新")},Q=()=>{p.success("设备列表已更新")},W=o=>{p.success(`开始使用${o.deviceName}进行检查`)},Y=o=>{p.info("查看就诊记录详情")},Z=o=>{X.push(`/ecg/${o.ecgId}`)},ee=o=>{if(!o.reportUrl){p.warning("报告生成中，请稍后查看");return}window.open(o.reportUrl)},te=o=>{p.success("上传成功"),o.shared=!0},S=_(null),se=o=>{var s;(s=S.value)==null||s.open({result:o.result,diagnosis:o.diagnosis,suggestion:o.suggestion})},le=o=>{p.success("判读结果已提交")},T=_(""),U=_([{id:1,time:"2024-03-14 10:00:00",type:"visit",message:"拉取就诊记录",status:"success"},{id:2,time:"2024-03-14 10:05:00",type:"ecg",message:"上传心电图数据",status:"success"},{id:3,time:"2024-03-14 10:10:00",type:"diagnosis",message:"心电图判读完成",status:"success"},{id:4,time:"2024-03-14 10:15:00",type:"union",message:"上传医共体平台",status:"failed"}]),ae=me(()=>T.value?U.value.filter(o=>o.type===T.value):U.value),ne=o=>({visit:"info",ecg:"success",diagnosis:"warning",union:"primary"})[o]||"info",oe=o=>({visit:"就诊记录",ecg:"心电图",diagnosis:"判读",union:"医共体"})[o]||o,ie=()=>{p.success("日志已更新")};return ve(()=>{G.params.id}),(o,s)=>{const c=u("el-button"),r=u("el-descriptions-item"),$=u("el-descriptions"),N=u("el-card"),b=u("el-icon"),f=u("el-tag"),E=u("el-col"),de=u("el-row"),d=u("el-table-column"),I=u("el-table"),V=u("el-tab-pane"),ue=u("el-link"),x=u("el-button-group"),C=u("el-option"),ce=u("el-select"),re=u("el-tabs");return v(),w("div",Ne,[a("div",Ve,[a("div",Ee,[e(N,{class:"info-card"},{header:t(()=>[a("div",Ie,[s[3]||(s[3]=a("span",{class:"section-title"},"基本信息",-1)),e(c,{type:"primary",link:"",onClick:F},{default:t(()=>s[2]||(s[2]=[n("编辑")])),_:1})])]),default:t(()=>[e($,{column:1,border:""},{default:t(()=>[e(r,{label:"患者编号"},{default:t(()=>[n(i(m.value.patientNo),1)]),_:1}),e(r,{label:"姓名"},{default:t(()=>[n(i(m.value.name),1)]),_:1}),e(r,{label:"性别"},{default:t(()=>[n(i(m.value.gender),1)]),_:1}),e(r,{label:"年龄"},{default:t(()=>[n(i(m.value.age)+"岁",1)]),_:1}),e(r,{label:"手机号"},{default:t(()=>[n(i(m.value.phone),1)]),_:1}),e(r,{label:"身份证号"},{default:t(()=>[n(i(m.value.idCard),1)]),_:1}),e(r,{label:"所属医院"},{default:t(()=>[n(i(m.value.hospital),1)]),_:1}),e(r,{label:"地址",span:2},{default:t(()=>[n(i(m.value.address),1)]),_:1})]),_:1})]),_:1}),a("div",Re,[e(N,{class:"info-card"},{header:t(()=>[a("div",Le,[s[5]||(s[5]=a("span",{class:"section-title"},"配置信息",-1)),e(c,{type:"primary",link:"",onClick:J},{default:t(()=>s[4]||(s[4]=[n("编辑配置")])),_:1})])]),default:t(()=>[e($,{column:1,border:""},{default:t(()=>[e(r,{label:"心电图机URL",span:2},{default:t(()=>[n(i(k.value.ecgUrl),1)]),_:1}),e(r,{label:"账号"},{default:t(()=>[n(i(k.value.ecgUsername),1)]),_:1}),e(r,{label:"密码"},{default:t(()=>s[6]||(s[6]=[n("******")])),_:1}),e(r,{label:"医共体API",span:2},{default:t(()=>[n(i(k.value.unionApi),1)]),_:1}),e(r,{label:"API密钥"},{default:t(()=>[n(i(k.value.apiKey),1)]),_:1}),e(r,{label:"密钥版本"},{default:t(()=>[n("v"+i(k.value.apiVersion),1)]),_:1})]),_:1})]),_:1}),e(N,{class:"info-card"},{header:t(()=>[a("div",Se,[s[8]||(s[8]=a("span",{class:"section-title"},"运行状态",-1)),e(c,{type:"primary",link:"",onClick:O},{default:t(()=>[e(b,null,{default:t(()=>[e(h(R))]),_:1}),s[7]||(s[7]=n("刷新 "))]),_:1})])]),default:t(()=>[e(de,{gutter:20},{default:t(()=>[e(E,{span:8},{default:t(()=>[a("div",Ue,[s[9]||(s[9]=a("div",{class:"status-label"},"心电图机连接",-1)),e(f,{type:g.value.ecgConnected?"success":"danger"},{default:t(()=>[n(i(g.value.ecgConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1}),e(E,{span:8},{default:t(()=>[a("div",$e,[s[10]||(s[10]=a("div",{class:"status-label"},"医共体连接",-1)),e(f,{type:g.value.unionConnected?"success":"danger"},{default:t(()=>[n(i(g.value.unionConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1}),e(E,{span:8},{default:t(()=>[a("div",xe,[s[11]||(s[11]=a("div",{class:"status-label"},"HIS连接",-1)),e(f,{type:g.value.hisConnected?"success":"danger"},{default:t(()=>[n(i(g.value.hisConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1})]),_:1})]),_:1})])]),a("div",De,[a("div",Ge,[e(N,{class:"info-card tools-card"},{header:t(()=>s[12]||(s[12]=[a("div",{class:"card-header"},[a("span",{class:"section-title"},"快捷工具")],-1)])),default:t(()=>[a("div",Xe,[e(c,{type:"success",onClick:M},{default:t(()=>[e(b,null,{default:t(()=>[e(h(ge))]),_:1}),s[13]||(s[13]=a("span",null,"医共体上传测试",-1))]),_:1}),e(c,{type:"warning",onClick:q},{default:t(()=>[e(b,null,{default:t(()=>[e(h(be))]),_:1}),s[14]||(s[14]=a("span",null,"HIS拉取测试",-1))]),_:1}),e(c,{type:"info",onClick:j},{default:t(()=>[e(b,null,{default:t(()=>[e(h(ye))]),_:1}),s[15]||(s[15]=a("span",null,"判读测试",-1))]),_:1})])]),_:1}),a("div",ze,[e(re,{modelValue:L.value,"onUpdate:modelValue":s[1]||(s[1]=l=>L.value=l)},{default:t(()=>[e(V,{label:"就诊记录",name:"visits"},{default:t(()=>[e(I,{data:A.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"visitTime",label:"就诊时间",width:"180"}),e(d,{prop:"department",label:"就诊科室",width:"120"}),e(d,{prop:"doctor",label:"主治医生",width:"120"}),e(d,{prop:"diagnosis",label:"诊断结果","show-overflow-tooltip":""}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:P(l.status)},{default:t(()=>[n(i(l.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"150",fixed:"right"},{default:t(({row:l})=>[e(c,{link:"",type:"primary",onClick:y=>Y(l)},{default:t(()=>s[16]||(s[16]=[n("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(V,{label:"心电图记录",name:"ecg"},{default:t(()=>[e(I,{data:B.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"ecgId",label:"心电图ID",width:"120"},{default:t(({row:l})=>[e(ue,{type:"primary",onClick:y=>Z(l)},{default:t(()=>[n(i(l.ecgId),1)]),_:2},1032,["onClick"])]),_:1}),e(d,{prop:"recordTime",label:"记录时间",width:"180"}),e(d,{prop:"deviceNo",label:"设备编号",width:"120"}),e(d,{prop:"deviceName",label:"设备名称",width:"150"}),e(d,{prop:"doctor",label:"检查医生",width:"120"}),e(d,{prop:"result",label:"分析结果","show-overflow-tooltip":""}),e(d,{prop:"diagnosis",label:"医生诊断","show-overflow-tooltip":""},{default:t(({row:l})=>[l.diagnosis?(v(),w("span",Ae,i(l.diagnosis),1)):l.status==="待判读"?(v(),D(c,{key:1,link:"",type:"primary",onClick:y=>se(l)},{default:t(()=>s[17]||(s[17]=[n(" 去判读 ")])),_:2},1032,["onClick"])):(v(),w("span",Be,"-"))]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:H(l.status)},{default:t(()=>[n(i(l.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"shared",label:"共享状态",width:"100"},{default:t(({row:l})=>[e(f,{type:l.shared?"success":"info"},{default:t(()=>[n(i(l.shared?"已共享":"未共享"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(x,null,{default:t(()=>[e(c,{link:"",type:"primary",onClick:y=>ee(l)},{default:t(()=>s[18]||(s[18]=[n("查看报告")])),_:2},1032,["onClick"]),l.shared?he("",!0):(v(),D(c,{key:0,link:"",type:"primary",onClick:y=>te(l)},{default:t(()=>s[19]||(s[19]=[n(" 上传共享 ")])),_:2},1032,["onClick"]))]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),e(V,{label:"可用设备",name:"devices"},{default:t(()=>[a("div",Pe,[a("div",He,[e(c,{type:"primary",size:"small",onClick:Q},{default:t(()=>[e(b,null,{default:t(()=>[e(h(R))]),_:1}),s[20]||(s[20]=n("刷新 "))]),_:1})]),e(I,{data:z.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"deviceNo",label:"设备编号",width:"120"}),e(d,{prop:"deviceName",label:"设备名称",width:"150"}),e(d,{prop:"hospital",label:"所属医院",width:"150"}),e(d,{prop:"ip",label:"IP地址",width:"130"}),e(d,{prop:"lastLoginTime",label:"最后登录",width:"180"}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(f,{type:l.status==="1"?"success":"danger"},{default:t(()=>[n(i(l.status==="1"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(x,null,{default:t(()=>[e(c,{link:"",type:"primary",disabled:l.status!=="1",onClick:y=>W(l)},{default:t(()=>s[21]||(s[21]=[n(" 开始检查 ")])),_:2},1032,["disabled","onClick"]),e(c,{link:"",type:"primary",onClick:y=>K(l)},{default:t(()=>s[22]||(s[22]=[n(" 测试连接 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])])]),_:1}),e(V,{label:"运行日志",name:"logs"},{default:t(()=>[a("div",Fe,[a("div",Ke,[a("div",Me,[e(ce,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=l=>T.value=l),placeholder:"日志类型",size:"small",style:{width:"120px"}},{default:t(()=>[e(C,{label:"全部",value:""}),e(C,{label:"就诊记录",value:"visit"}),e(C,{label:"心电图",value:"ecg"}),e(C,{label:"判读",value:"diagnosis"}),e(C,{label:"医共体",value:"union"})]),_:1},8,["modelValue"]),e(c,{type:"primary",link:"",onClick:ie},{default:t(()=>[e(b,null,{default:t(()=>[e(h(R))]),_:1}),s[23]||(s[23]=n("刷新 "))]),_:1})])]),a("div",qe,[a("div",je,[(v(!0),w(ke,null,Ce(ae.value,l=>(v(),w("div",{key:l.id,class:"log-item"},[s[24]||(s[24]=a("div",{class:"timeline-line"},null,-1)),a("div",{class:we(["timeline-dot",l.status==="success"?"success":"error"])},null,2),a("div",Je,i(l.time),1),a("div",Oe,[e(f,{size:"small",type:ne(l.type),class:"log-type"},{default:t(()=>[n(i(oe(l.type)),1)]),_:2},1032,["type"]),a("span",Qe,i(l.message),1)]),a("div",We,[e(f,{size:"small",type:l.status==="success"?"success":"danger"},{default:t(()=>[n(i(l.status==="success"?"成功":"失败"),1)]),_:2},1032,["type"])])]))),128))])])])]),_:1})]),_:1},8,["modelValue"])])])])]),e(Te,{ref_key:"diagnosisRef",ref:S,onSubmit:le},null,512)])}}},st=pe(Ye,[["__scopeId","data-v-9cb2cdd5"]]);export{st as default};
