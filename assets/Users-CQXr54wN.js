import{B as T}from"./BaseListPage-_ExiKInV.js";import{u as j}from"./mockData-VgQeUehh.js";import{_ as O,r as _,a as y,m as $,g as u,o as L,c as M,d as l,w as t,k as b,t as x,E as V}from"./index-CYhqdMvL.js";const F={class:"users-page"},I={__name:"Users",setup(z){const m=_(null),r=y({username:"",phone:"",status:""}),i=_(!1),g=_("create"),v=_(null),s=y({username:"",realName:"",phone:"",email:"",role:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},c=o=>{m.value&&(m.value.loading=!0,setTimeout(()=>{m.value.tableData=j.filter(e=>{const d=!o.username||e.username.includes(o.username),n=!o.phone||e.phone.includes(o.phone),f=!o.status||e.status===o.status;return d&&n&&f}),m.value.total=m.value.tableData.length,m.value.loading=!1},500))},C=()=>{Object.keys(r).forEach(o=>{r[o]=""}),c(r)},E=()=>{g.value="create",i.value=!0,Object.keys(s).forEach(o=>{s[o]=""})},N=o=>{g.value="edit",i.value=!0,Object.keys(s).forEach(e=>{s[e]=o[e]})},B=o=>{V.success("删除成功"),c(r)},q=({command:o,selection:e})=>{switch(o){case"delete":V.success(`批量删除 ${e.length} 条记录成功`),c(r);break;case"export":V.success("导出成功");break}},D=()=>{v.value.validate(o=>{o&&(V.success(g.value==="create"?"创建成功":"更新成功"),i.value=!1,c(r))})};return $(()=>{c(r)}),(o,e)=>{const d=u("el-input"),n=u("el-form-item"),f=u("el-option"),h=u("el-select"),p=u("el-table-column"),P=u("el-tag"),U=u("el-dropdown-item"),S=u("el-form"),k=u("el-button"),R=u("el-dialog");return L(),M("div",F,[l(T,{ref_key:"listPage",ref:m,title:"用户管理","search-form":r,onSearch:c,onReset:C,onCreate:E,onEdit:N,onDelete:B,onBatchCommand:q},{"search-items":t(()=>[l(n,{label:"用户名"},{default:t(()=>[l(d,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号"},{default:t(()=>[l(d,{modelValue:r.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>r.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"状态",class:"status-item"},{default:t(()=>[l(h,{modelValue:r.status,"onUpdate:modelValue":e[2]||(e[2]=a=>r.status=a),placeholder:"请选择状态",clearable:""},{default:t(()=>[l(f,{label:"启用",value:"1"}),l(f,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),"dropdown-items":t(({row:a})=>[l(U,{command:a.status==="1"?"disable":"enable"},{default:t(()=>[b(x(a.status==="1"?"禁用":"启用"),1)]),_:2},1032,["command"]),l(U,{command:"resetPwd"},{default:t(()=>e[10]||(e[10]=[b("重置密码")])),_:1})]),default:t(()=>[l(p,{prop:"username",label:"用��名"}),l(p,{prop:"realName",label:"姓名"}),l(p,{prop:"phone",label:"手机号"}),l(p,{prop:"email",label:"邮箱"}),l(p,{prop:"role",label:"角色"}),l(p,{prop:"status",label:"状态"},{default:t(({row:a})=>[l(P,{type:a.status==="1"?"success":"danger"},{default:t(()=>[b(x(a.status==="1"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(p,{prop:"createTime",label:"创建时间"})]),_:1},8,["search-form"]),l(R,{modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=a=>i.value=a),title:g.value==="create"?"新建用户":"编辑用户",width:"500px"},{footer:t(()=>[l(k,{onClick:e[8]||(e[8]=a=>i.value=!1)},{default:t(()=>e[11]||(e[11]=[b("取消")])),_:1}),l(k,{type:"primary",onClick:D},{default:t(()=>e[12]||(e[12]=[b("确定")])),_:1})]),default:t(()=>[l(S,{ref_key:"formRef",ref:v,model:s,rules:w,"label-width":"80px"},{default:t(()=>[l(n,{label:"用户名",prop:"username"},{default:t(()=>[l(d,{modelValue:s.username,"onUpdate:modelValue":e[3]||(e[3]=a=>s.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(n,{label:"姓名",prop:"realName"},{default:t(()=>[l(d,{modelValue:s.realName,"onUpdate:modelValue":e[4]||(e[4]=a=>s.realName=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号",prop:"phone"},{default:t(()=>[l(d,{modelValue:s.phone,"onUpdate:modelValue":e[5]||(e[5]=a=>s.phone=a),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(n,{label:"邮箱",prop:"email"},{default:t(()=>[l(d,{modelValue:s.email,"onUpdate:modelValue":e[6]||(e[6]=a=>s.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(n,{label:"角色",prop:"role"},{default:t(()=>[l(h,{modelValue:s.role,"onUpdate:modelValue":e[7]||(e[7]=a=>s.role=a),placeholder:"请选择角色"},{default:t(()=>[l(f,{label:"管理员",value:"admin"}),l(f,{label:"普通用户",value:"user"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},J=O(I,[["__scopeId","data-v-36d01805"]]);export{J as default};
