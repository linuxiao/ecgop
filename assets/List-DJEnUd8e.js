import{_ as Q,e as W,a as T,r as m,g as n,a2 as X,o as $,c as ee,d as e,w as a,j as le,h as w,z as ae,k as r,p as te,b as g,ah as oe,Y as ne,q as de,t as B,ac as se,E as A}from"./index-BoCTFli4.js";const re={class:"hospital-list"},ue={class:"card-header"},ie={class:"pagination"},pe={class:"dialog-footer"},me={__name:"List",setup(ce){const E=W(),u=T({name:"",status:""}),D=m(!1),q=m([{id:1,name:"第一人民医院",code:"H001",level:"三级甲等",deviceCount:5,status:"online",lastActiveTime:"2024-01-20 10:30:00",contact:"张三",phone:"13800138000",address:"北京市朝阳区",remark:""},{id:2,name:"第二人民医院",code:"H002",level:"三级乙等",deviceCount:3,status:"online",lastActiveTime:"2024-01-20 10:25:00",contact:"李四",phone:"13800138001",address:"北京市海淀区",remark:""},{id:3,name:"社区医院",code:"H003",level:"社区医院",deviceCount:2,status:"offline",lastActiveTime:"2024-01-19 15:30:00",contact:"王五",phone:"13800138002",address:"北京市西城区",remark:""}]),b=m(1),V=m(10),j=m(3),v=m(!1),_=m("add"),k=m(null),o=T({name:"",code:"",level:"",contact:"",phone:"",address:"",remark:""}),H={name:[{required:!0,message:"请输入医院名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入医院代码",trigger:"blur"},{pattern:/^[A-Z0-9]{3,10}$/,message:"3-10位大写字母或数字",trigger:"blur"}],level:[{required:!0,message:"请选择医院等级",trigger:"change"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},y=()=>{console.log("Search form:",u)},N=()=>{u.name="",u.status="",y()},R=()=>{_.value="add",v.value=!0,Object.keys(o).forEach(d=>o[d]="")},K=d=>{_.value="edit",v.value=!0,Object.assign(o,d)},x=d=>{E.push(`/hospitals/${d.id}`)},L=d=>{se.confirm("确定要删除该医院吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A.success("删除成功")}).catch(()=>{})},M=async()=>{if(k.value)try{await k.value.validate(),A.success(_.value==="add"?"新增成功":"更新成功"),v.value=!1}catch(d){console.error("Validation failed:",d)}},O=d=>{V.value=d},P=d=>{b.value=d};return(d,l)=>{const c=n("el-input"),s=n("el-form-item"),i=n("el-option"),U=n("el-select"),h=n("el-icon"),p=n("el-button"),z=n("el-form"),S=n("el-card"),F=n("el-link"),f=n("el-table-column"),I=n("el-tag"),Y=n("el-table"),Z=n("el-pagination"),G=n("el-dialog"),J=X("loading");return $(),ee("div",re,[e(S,{class:"search-card",shadow:"never"},{default:a(()=>[e(z,{model:u,inline:""},{default:a(()=>[e(s,{label:"医院名称"},{default:a(()=>[e(c,{modelValue:u.name,"onUpdate:modelValue":l[0]||(l[0]=t=>u.name=t),placeholder:"请输入医院名称",clearable:"",onKeyup:le(y,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:a(()=>[e(U,{modelValue:u.status,"onUpdate:modelValue":l[1]||(l[1]=t=>u.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(i,{label:"在线",value:"online"}),e(i,{label:"离线",value:"offline"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(p,{type:"primary",onClick:y},{default:a(()=>[e(h,null,{default:a(()=>[e(w(ae))]),_:1}),l[13]||(l[13]=r(" 搜索 "))]),_:1}),e(p,{onClick:N},{default:a(()=>[e(h,null,{default:a(()=>[e(w(te))]),_:1}),l[14]||(l[14]=r(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(S,{class:"table-card",shadow:"never"},{header:a(()=>[g("div",ue,[l[16]||(l[16]=g("span",null,"医院列表",-1)),e(p,{type:"primary",onClick:R},{default:a(()=>[e(h,null,{default:a(()=>[e(w(oe))]),_:1}),l[15]||(l[15]=r(" 新增医院 "))]),_:1})])]),default:a(()=>[ne(($(),de(Y,{data:q.value,style:{width:"100%"},border:""},{default:a(()=>[e(f,{prop:"name",label:"医院名称","min-width":"200"},{default:a(({row:t})=>[e(F,{type:"primary",onClick:C=>x(t)},{default:a(()=>[r(B(t.name),1)]),_:2},1032,["onClick"])]),_:1}),e(f,{prop:"code",label:"医院代码",width:"120"}),e(f,{prop:"level",label:"医院等级",width:"120"}),e(f,{prop:"deviceCount",label:"设备数量",width:"100",align:"center"}),e(f,{prop:"status",label:"状态",width:"100",align:"center"},{default:a(({row:t})=>[e(I,{type:t.status==="online"?"success":"danger"},{default:a(()=>[r(B(t.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),e(f,{prop:"lastActiveTime",label:"最后活跃时间",width:"180"}),e(f,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[e(p,{link:"",type:"primary",onClick:C=>K(t)},{default:a(()=>l[17]||(l[17]=[r("编辑")])),_:2},1032,["onClick"]),e(p,{link:"",type:"primary",onClick:C=>x(t)},{default:a(()=>l[18]||(l[18]=[r("查看")])),_:2},1032,["onClick"]),e(p,{link:"",type:"danger",onClick:C=>L(t),disabled:t.status==="online"},{default:a(()=>l[19]||(l[19]=[r(" 删除 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[J,D.value]]),g("div",ie,[e(Z,{"current-page":b.value,"onUpdate:currentPage":l[2]||(l[2]=t=>b.value=t),"page-size":V.value,"onUpdate:pageSize":l[3]||(l[3]=t=>V.value=t),"page-sizes":[10,20,50,100],total:j.value,layout:"total, sizes, prev, pager, next",onSizeChange:O,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),_:1}),e(G,{modelValue:v.value,"onUpdate:modelValue":l[12]||(l[12]=t=>v.value=t),title:_.value==="add"?"新增医院":"编辑医院",width:"600px"},{footer:a(()=>[g("span",pe,[e(p,{onClick:l[11]||(l[11]=t=>v.value=!1)},{default:a(()=>l[20]||(l[20]=[r("取消")])),_:1}),e(p,{type:"primary",onClick:M},{default:a(()=>l[21]||(l[21]=[r(" 确认 ")])),_:1})])]),default:a(()=>[e(z,{ref_key:"formRef",ref:k,model:o,rules:H,"label-width":"100px"},{default:a(()=>[e(s,{label:"医院名称",prop:"name"},{default:a(()=>[e(c,{modelValue:o.name,"onUpdate:modelValue":l[4]||(l[4]=t=>o.name=t),placeholder:"请输入医院名称"},null,8,["modelValue"])]),_:1}),e(s,{label:"医院代码",prop:"code"},{default:a(()=>[e(c,{modelValue:o.code,"onUpdate:modelValue":l[5]||(l[5]=t=>o.code=t),placeholder:"请输入医院代码"},null,8,["modelValue"])]),_:1}),e(s,{label:"医院等级",prop:"level"},{default:a(()=>[e(U,{modelValue:o.level,"onUpdate:modelValue":l[6]||(l[6]=t=>o.level=t),placeholder:"请选择医院等级"},{default:a(()=>[e(i,{label:"三级甲等",value:"三级甲等"}),e(i,{label:"三级乙等",value:"三级乙等"}),e(i,{label:"二级甲等",value:"二级甲等"}),e(i,{label:"二级乙等",value:"二级乙等"}),e(i,{label:"一级",value:"一级"}),e(i,{label:"社区医院",value:"社区医院"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"联系人",prop:"contact"},{default:a(()=>[e(c,{modelValue:o.contact,"onUpdate:modelValue":l[7]||(l[7]=t=>o.contact=t),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),e(s,{label:"联系电话",prop:"phone"},{default:a(()=>[e(c,{modelValue:o.phone,"onUpdate:modelValue":l[8]||(l[8]=t=>o.phone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(s,{label:"地址",prop:"address"},{default:a(()=>[e(c,{modelValue:o.address,"onUpdate:modelValue":l[9]||(l[9]=t=>o.address=t),placeholder:"请输入医院地址"},null,8,["modelValue"])]),_:1}),e(s,{label:"备注",prop:"remark"},{default:a(()=>[e(c,{modelValue:o.remark,"onUpdate:modelValue":l[10]||(l[10]=t=>o.remark=t),type:"textarea",rows:"3",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ve=Q(me,[["__scopeId","data-v-d2ef2aad"]]);export{ve as default};
