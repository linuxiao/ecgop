import{B as R}from"./BaseListPage-VFQajrBy.js";import{h as S}from"./mockData-VgQeUehh.js";import{_ as T,r as b,a as B,m as M,g as n,o as q,c as H,d as e,w as t,k as d,t as u,b as N}from"./index-Dnu6zoKa.js";const U={class:"his-logs-page"},Y={__name:"HisLogs",setup(J){const p=b(null),g=b(!1),r=b({}),o=B({interfaceName:"",status:"",timeRange:[]}),_=l=>{p.value&&(p.value.loading=!0,setTimeout(()=>{p.value.tableData=S.filter(a=>{const f=!l.interfaceName||a.interfaceName.includes(l.interfaceName),m=!l.status||a.status===l.status;return f&&m}),p.value.total=p.value.tableData.length,p.value.loading=!1},500))},w=()=>{Object.keys(o).forEach(l=>{o[l]=l==="timeRange"?[]:""}),_(o)},v=l=>{if(!l)return"-";try{return JSON.stringify(JSON.parse(l),null,2)}catch{return l}};return M(()=>{_(o)}),(l,a)=>{const f=n("el-input"),m=n("el-form-item"),h=n("el-option"),D=n("el-select"),y=n("el-date-picker"),i=n("el-table-column"),V=n("el-tag"),k=n("el-dropdown-item"),c=n("el-descriptions-item"),x=n("el-descriptions"),L=n("el-dialog");return q(),H("div",U,[e(R,{ref_key:"listPage",ref:p,"search-form":o,onSearch:_,onReset:w},{"search-items":t(()=>[e(m,{label:"接口名称"},{default:t(()=>[e(f,{modelValue:o.interfaceName,"onUpdate:modelValue":a[0]||(a[0]=s=>o.interfaceName=s),placeholder:"请输入接口名称",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{label:"状态",class:"status-item"},{default:t(()=>[e(D,{modelValue:o.status,"onUpdate:modelValue":a[1]||(a[1]=s=>o.status=s),placeholder:"请选择状态",clearable:""},{default:t(()=>[e(h,{label:"成功",value:"成功"}),e(h,{label:"失败",value:"失败"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"时间范围"},{default:t(()=>[e(y,{modelValue:o.timeRange,"onUpdate:modelValue":a[2]||(a[2]=s=>o.timeRange=s),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),"dropdown-items":t(({row:s})=>[e(k,{command:"viewDetail"},{default:t(()=>a[4]||(a[4]=[d("查看详情")])),_:1})]),default:t(()=>[e(i,{prop:"interfaceName",label:"接口名称"}),e(i,{prop:"requestTime",label:"请求时间"}),e(i,{prop:"responseTime",label:"响应时间"}),e(i,{prop:"status",label:"状态"},{default:t(({row:s})=>[e(V,{type:s.status==="成功"?"success":"danger"},{default:t(()=>[d(u(s.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"errorMsg",label:"错误信息","show-overflow-tooltip":""}),e(i,{prop:"requestData",label:"请求数据","show-overflow-tooltip":""}),e(i,{prop:"responseData",label:"响应数据","show-overflow-tooltip":""})]),_:1},8,["search-form"]),e(L,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=s=>g.value=s),title:"日志详情",width:"800px"},{default:t(()=>[e(x,{column:2,border:""},{default:t(()=>[e(c,{label:"接口名称"},{default:t(()=>[d(u(r.value.interfaceName),1)]),_:1}),e(c,{label:"状态"},{default:t(()=>[e(V,{type:r.value.status==="成功"?"success":"danger"},{default:t(()=>[d(u(r.value.status),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"请求时间"},{default:t(()=>[d(u(r.value.requestTime),1)]),_:1}),e(c,{label:"响应时间"},{default:t(()=>[d(u(r.value.responseTime),1)]),_:1}),e(c,{label:"错误信息",span:2},{default:t(()=>[d(u(r.value.errorMsg||"-"),1)]),_:1}),e(c,{label:"请求数据",span:2},{default:t(()=>[N("pre",null,u(v(r.value.requestData)),1)]),_:1}),e(c,{label:"响应数据",span:2},{default:t(()=>[N("pre",null,u(v(r.value.responseData)),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},E=T(Y,[["__scopeId","data-v-8b3afcda"]]);export{E as default};
