import{_ as A,r as p,a as R,g as a,o as _,c as k,d as l,w as o,b as c,k as i,q as h,h as C,aj as G,v as H,t as J,a1 as x,F as K,C as L,ac as Q,E as U}from"./index-BoCTFli4.js";const W={class:"permissions-page"},X={class:"card-header"},Y={class:"custom-tree-node"},Z={class:"actions"},ee={__name:"Permissions",setup(le){const w=p(null),v=p(null),V={children:"children",label:"name"},g=p([{id:1,name:"系统管理",code:"system",type:"menu",icon:"Setting",path:"/system",sort:1,children:[{id:11,name:"用户管理",code:"system:user",type:"menu",icon:"User",path:"/system/users",sort:1,children:[{id:111,name:"查看用户",code:"system:user:view",type:"permission"},{id:112,name:"新增用户",code:"system:user:add",type:"permission"},{id:113,name:"编辑用户",code:"system:user:edit",type:"permission"},{id:114,name:"删除用户",code:"system:user:delete",type:"permission"}]},{id:12,name:"角色管理",code:"system:role",type:"menu",icon:"UserFilled",path:"/system/roles",sort:2,children:[{id:121,name:"查看角色",code:"system:role:view",type:"permission"},{id:122,name:"新增角色",code:"system:role:add",type:"permission"},{id:123,name:"编辑角色",code:"system:role:edit",type:"permission"},{id:124,name:"删除角色",code:"system:role:delete",type:"permission"}]}]}]),r=p(!1),u=p("menu"),t=R({id:"",parentId:null,name:"",code:"",type:"",icon:"",path:"",sort:0}),E={name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"}]},N=n=>{console.log(n)},B=()=>{u.value="menu",r.value=!0,Object.keys(t).forEach(n=>{t[n]=n==="sort"?0:""}),t.type="menu"},$=()=>{u.value="permission",r.value=!0,Object.keys(t).forEach(n=>{t[n]=n==="sort"?0:""}),t.type="permission"},j=n=>{u.value=n.type,r.value=!0,Object.keys(t).forEach(e=>{t[e]=n[e]})},z=(n,e)=>{var d;Q.confirm(`确认删除 ${e.name} 吗？${(d=e.children)!=null&&d.length?"删除后将同时删除子节点":""}`,"提示",{type:"warning"}).then(()=>{U.success("删除成功")})},I=()=>{v.value.validate(n=>{n&&(U.success(t.id?"更新成功":"创建成功"),r.value=!1)})};return(n,e)=>{const d=a("el-button"),M=a("el-button-group"),b=a("el-icon"),P=a("el-tree"),T=a("el-card"),q=a("el-tree-select"),m=a("el-form-item"),f=a("el-input"),D=a("el-input-number"),F=a("el-form"),O=a("el-dialog");return _(),k("div",W,[l(T,{class:"tree-card"},{header:o(()=>[c("div",X,[e[10]||(e[10]=c("span",null,"权限菜单",-1)),l(M,null,{default:o(()=>[l(d,{type:"primary",size:"small",onClick:B},{default:o(()=>e[8]||(e[8]=[i(" 新增菜单 ")])),_:1}),l(d,{type:"primary",size:"small",onClick:$},{default:o(()=>e[9]||(e[9]=[i(" 新增权限 ")])),_:1})]),_:1})])]),default:o(()=>[l(P,{ref_key:"permissionTree",ref:w,data:g.value,props:V,"node-key":"id","default-expand-all":"","highlight-current":"",onNodeClick:N},{default:o(({node:s,data:y})=>[c("div",Y,[c("span",null,[y.type==="menu"?(_(),h(b,{key:0},{default:o(()=>[l(C(G))]),_:1})):(_(),h(b,{key:1},{default:o(()=>[l(C(H))]),_:1})),i(" "+J(s.label),1)]),c("span",Z,[l(d,{link:"",type:"primary",size:"small",onClick:x(S=>j(y),["stop"])},{default:o(()=>e[11]||(e[11]=[i(" 编辑 ")])),_:2},1032,["onClick"]),l(d,{link:"",type:"danger",size:"small",onClick:x(S=>z(s,y),["stop"])},{default:o(()=>e[12]||(e[12]=[i(" 删除 ")])),_:2},1032,["onClick"])])])]),_:1},8,["data"])]),_:1}),l(O,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=s=>r.value=s),title:u.value==="menu"?t.id?"编辑菜单":"新增菜单":t.id?"编辑权限":"新增权限",width:"500px"},{footer:o(()=>[l(d,{onClick:e[6]||(e[6]=s=>r.value=!1)},{default:o(()=>e[13]||(e[13]=[i("取消")])),_:1}),l(d,{type:"primary",onClick:I},{default:o(()=>e[14]||(e[14]=[i("确定")])),_:1})]),default:o(()=>[l(F,{ref_key:"formRef",ref:v,model:t,rules:E,"label-width":"100px"},{default:o(()=>[l(m,{label:"上级节点"},{default:o(()=>[l(q,{modelValue:t.parentId,"onUpdate:modelValue":e[0]||(e[0]=s=>t.parentId=s),data:g.value,props:V,"check-strictly":"","default-expand-all":"",placeholder:"请选择上级节点"},null,8,["modelValue","data"])]),_:1}),l(m,{label:"名称",prop:"name"},{default:o(()=>[l(f,{modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"编码",prop:"code"},{default:o(()=>[l(f,{modelValue:t.code,"onUpdate:modelValue":e[2]||(e[2]=s=>t.code=s),placeholder:"请输入编码"},null,8,["modelValue"])]),_:1}),u.value==="menu"?(_(),k(K,{key:0},[l(m,{label:"图标",prop:"icon"},{default:o(()=>[l(f,{modelValue:t.icon,"onUpdate:modelValue":e[3]||(e[3]=s=>t.icon=s),placeholder:"请输入图标"},null,8,["modelValue"])]),_:1}),l(m,{label:"路由",prop:"path"},{default:o(()=>[l(f,{modelValue:t.path,"onUpdate:modelValue":e[4]||(e[4]=s=>t.path=s),placeholder:"请输入路由"},null,8,["modelValue"])]),_:1}),l(m,{label:"排序",prop:"sort"},{default:o(()=>[l(D,{modelValue:t.sort,"onUpdate:modelValue":e[5]||(e[5]=s=>t.sort=s),min:0,max:999},null,8,["modelValue"])]),_:1})],64)):L("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},oe=A(ee,[["__scopeId","data-v-ae9bc378"]]);export{oe as default};
