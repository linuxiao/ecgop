import{B as K}from"./BaseListPage-D0QVsjqV.js";import{_ as L,r as f,a as w,m as A,g as r,o as F,c as H,d as l,w as t,k as m,t as x,E as b}from"./index-C_S8R5SK.js";const z={class:"roles-page"},G={__name:"Roles",setup(J){const d=f(null),C=f(null),s=w({roleName:"",status:""}),i=f(!1),v=f("create"),N=f(null),n=w({roleName:"",roleCode:"",description:""}),g=f(!1),E=[{id:1,name:"系统管理",children:[{id:11,name:"用户管理"},{id:12,name:"角色管理"},{id:13,name:"权限管理"}]},{id:2,name:"设备管理",children:[{id:21,name:"设备列表"},{id:22,name:"设备维护"}]},{id:3,name:"患者管理",children:[{id:31,name:"患者列表"},{id:32,name:"病例管理"}]}],R={roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"}]},T=[{id:1,roleName:"超级管理员",roleCode:"SUPER_ADMIN",description:"系统超级管理员",createTime:"2024-03-14 12:00:00",status:"1"},{id:2,roleName:"医生",roleCode:"DOCTOR",description:"医生角色",createTime:"2024-03-14 13:00:00",status:"1"},{id:3,roleName:"护士",roleCode:"NURSE",description:"护士角色",createTime:"2024-03-14 14:00:00",status:"1"}],p=a=>{d.value&&(d.value.loading=!0,setTimeout(()=>{d.value.tableData=T.filter(e=>{const c=!a.roleName||e.roleName.includes(a.roleName),u=!a.status||e.status===a.status;return c&&u}),d.value.total=d.value.tableData.length,d.value.loading=!1},500))},D=()=>{Object.keys(s).forEach(a=>{s[a]=""}),p(s)},U=()=>{v.value="create",i.value=!0,Object.keys(n).forEach(a=>{n[a]=""})},S=a=>{v.value="edit",i.value=!0,Object.keys(n).forEach(e=>{n[e]=a[e]})},B=a=>{b.success("删除成功"),p(s)},O=({command:a,selection:e})=>{switch(a){case"delete":b.success(`批量删除 ${e.length} 条记录成功`),p(s);break;case"export":b.success("导出成功");break}},P=()=>{N.value.validate(a=>{a&&(b.success(v.value==="create"?"创建成功":"更新成功"),i.value=!1,p(s))})},j=()=>{C.value.getCheckedKeys(),C.value.getHalfCheckedKeys(),b.success("权限设置成功"),g.value=!1};return A(()=>{p(s)}),(a,e)=>{const c=r("el-input"),u=r("el-form-item"),k=r("el-option"),M=r("el-select"),_=r("el-table-column"),$=r("el-tag"),y=r("el-dropdown-item"),q=r("el-form"),V=r("el-button"),h=r("el-dialog"),I=r("el-tree");return F(),H("div",z,[l(K,{ref_key:"listPage",ref:d,"search-form":s,onSearch:p,onReset:D,onCreate:U,onEdit:S,onDelete:B,onBatchCommand:O},{"search-items":t(()=>[l(u,{label:"角色名称"},{default:t(()=>[l(c,{modelValue:s.roleName,"onUpdate:modelValue":e[0]||(e[0]=o=>s.roleName=o),placeholder:"请输入角色名称",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"状态",class:"status-item"},{default:t(()=>[l(M,{modelValue:s.status,"onUpdate:modelValue":e[1]||(e[1]=o=>s.status=o),placeholder:"请选择状态",clearable:""},{default:t(()=>[l(k,{label:"启用",value:"1"}),l(k,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),"dropdown-items":t(({row:o})=>[l(y,{command:"permission"},{default:t(()=>e[9]||(e[9]=[m("权限设置")])),_:1}),l(y,{command:o.status==="1"?"disable":"enable"},{default:t(()=>[m(x(o.status==="1"?"禁用":"启用"),1)]),_:2},1032,["command"])]),default:t(()=>[l(_,{prop:"roleName",label:"角色名称"}),l(_,{prop:"roleCode",label:"角色编码"}),l(_,{prop:"description",label:"描述","show-overflow-tooltip":""}),l(_,{prop:"createTime",label:"创建时间"}),l(_,{prop:"status",label:"状态"},{default:t(({row:o})=>[l($,{type:o.status==="1"?"success":"danger"},{default:t(()=>[m(x(o.status==="1"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["search-form"]),l(h,{modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=o=>i.value=o),title:v.value==="create"?"新建角色":"编辑角色",width:"500px"},{footer:t(()=>[l(V,{onClick:e[5]||(e[5]=o=>i.value=!1)},{default:t(()=>e[10]||(e[10]=[m("取消")])),_:1}),l(V,{type:"primary",onClick:P},{default:t(()=>e[11]||(e[11]=[m("确定")])),_:1})]),default:t(()=>[l(q,{ref_key:"formRef",ref:N,model:n,rules:R,"label-width":"100px"},{default:t(()=>[l(u,{label:"角色名称",prop:"roleName"},{default:t(()=>[l(c,{modelValue:n.roleName,"onUpdate:modelValue":e[2]||(e[2]=o=>n.roleName=o),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"角色编码",prop:"roleCode"},{default:t(()=>[l(c,{modelValue:n.roleCode,"onUpdate:modelValue":e[3]||(e[3]=o=>n.roleCode=o),placeholder:"请输入角色编码"},null,8,["modelValue"])]),_:1}),l(u,{label:"描述",prop:"description"},{default:t(()=>[l(c,{modelValue:n.description,"onUpdate:modelValue":e[4]||(e[4]=o=>n.description=o),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(h,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=o=>g.value=o),title:"权限设置",width:"600px"},{footer:t(()=>[l(V,{onClick:e[7]||(e[7]=o=>g.value=!1)},{default:t(()=>e[12]||(e[12]=[m("取消")])),_:1}),l(V,{type:"primary",onClick:j},{default:t(()=>e[13]||(e[13]=[m("确定")])),_:1})]),default:t(()=>[l(I,{ref_key:"permissionTree",ref:C,data:E,props:{label:"name"},"show-checkbox":"","node-key":"id"},null,512)]),_:1},8,["modelValue"])])}}},X=L(G,[["__scopeId","data-v-bede5781"]]);export{X as default};
