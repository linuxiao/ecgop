import{B as j}from"./BaseListPage-_ExiKInV.js";import{_ as O,r as V,e as T,a as k,m as M,g as r,o as F,c as H,d as l,w as t,k as b,t as I,E as h}from"./index-CYhqdMvL.js";const z={class:"patients-page"},A={__name:"List",setup(G){const i=V(null),N=T(),d=k({patientNo:"",name:"",hospital:"",phone:""}),m=V(!1),f=V("create"),v=V(null),n=k({name:"",gender:"",age:"",phone:"",idCard:"",address:""}),X={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],idCard:[{required:!0,message:"���输入身份证号",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号",trigger:"blur"}]},U=[{id:1,patientNo:"P202401001",name:"张三",gender:"男",age:35,phone:"13800138000",hospital:"第一人民医院",idCard:"310101198801011234",address:"上海市XX区XX路XX号",lastVisit:"2024-03-10"},{id:2,patientNo:"P202401002",name:"李四",gender:"女",age:28,phone:"13800138001",hospital:"第二人民医院",idCard:"310101199001011234",address:"上海市XX区XX路XX号",lastVisit:"2024-03-12"}],x=o=>{N.push({name:"PatientDetail",params:{id:o.id}})},c=o=>{i.value&&(i.value.loading=!0,setTimeout(()=>{i.value.tableData=U.filter(e=>{const u=!o.patientNo||e.patientNo.includes(o.patientNo),s=!o.name||e.name.includes(o.name),g=!o.hospital||e.hospital===o.hospital,_=!o.phone||e.phone.includes(o.phone);return u&&s&&g&&_}),i.value.total=i.value.tableData.length,i.value.loading=!1},500))},y=()=>{Object.keys(d).forEach(o=>{d[o]=""}),c(d)},E=()=>{f.value="create",m.value=!0,Object.keys(n).forEach(o=>{n[o]=""})},P=o=>{f.value="edit",m.value=!0,Object.keys(n).forEach(e=>{n[e]=o[e]})},D=o=>{h.success("删除成功"),c(d)},$=({command:o,selection:e})=>{switch(o){case"delete":h.success(`批量删除 ${e.length} 条记录成功`),c(d);break;case"export":h.success("导出成功");break}},B=()=>{v.value.validate(o=>{o&&(h.success(f.value==="create"?"创建成功":"更新成功"),m.value=!1,c(d))})};return M(()=>{c(d)}),(o,e)=>{const u=r("el-input"),s=r("el-form-item"),g=r("el-option"),_=r("el-select"),p=r("el-table-column"),q=r("el-link"),C=r("el-dropdown-item"),R=r("el-input-number"),L=r("el-form"),w=r("el-button"),S=r("el-dialog");return F(),H("div",z,[l(j,{ref_key:"listPage",ref:i,"search-form":d,onSearch:c,onReset:y,onCreate:E,onEdit:P,onDelete:D,onBatchCommand:$},{"search-items":t(()=>[l(s,{label:"患者编号"},{default:t(()=>[l(u,{modelValue:d.patientNo,"onUpdate:modelValue":e[0]||(e[0]=a=>d.patientNo=a),placeholder:"请输入患者编号",clearable:""},null,8,["modelValue"])]),_:1}),l(s,{label:"姓名"},{default:t(()=>[l(u,{modelValue:d.name,"onUpdate:modelValue":e[1]||(e[1]=a=>d.name=a),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(s,{label:"医院"},{default:t(()=>[l(_,{modelValue:d.hospital,"onUpdate:modelValue":e[2]||(e[2]=a=>d.hospital=a),placeholder:"请选择医院",clearable:""},{default:t(()=>[l(g,{label:"第一人民医院",value:"第一人民医院"}),l(g,{label:"第二人民医院",value:"第二人民医院"})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"手机号"},{default:t(()=>[l(u,{modelValue:d.phone,"onUpdate:modelValue":e[3]||(e[3]=a=>d.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1})]),"dropdown-items":t(({row:a})=>[l(C,{command:"viewCases"},{default:t(()=>e[12]||(e[12]=[b("病例记录")])),_:1}),l(C,{command:"viewEcg"},{default:t(()=>e[13]||(e[13]=[b("心电图记录")])),_:1})]),default:t(()=>[l(p,{prop:"patientNo",label:"患者编号",width:"120"}),l(p,{prop:"name",label:"姓名",width:"120"},{default:t(({row:a})=>[l(q,{type:"primary",onClick:J=>x(a)},{default:t(()=>[b(I(a.name),1)]),_:2},1032,["onClick"])]),_:1}),l(p,{prop:"gender",label:"性别"}),l(p,{prop:"age",label:"年龄"}),l(p,{prop:"phone",label:"手机号"}),l(p,{prop:"hospital",label:"医院",width:"150"}),l(p,{prop:"idCard",label:"身份证号"}),l(p,{prop:"address",label:"地址","show-overflow-tooltip":""}),l(p,{prop:"lastVisit",label:"最近就诊"})]),_:1},8,["search-form"]),l(S,{modelValue:m.value,"onUpdate:modelValue":e[11]||(e[11]=a=>m.value=a),title:f.value==="create"?"新建患者":"编辑者",width:"500px"},{footer:t(()=>[l(w,{onClick:e[10]||(e[10]=a=>m.value=!1)},{default:t(()=>e[14]||(e[14]=[b("取消")])),_:1}),l(w,{type:"primary",onClick:B},{default:t(()=>e[15]||(e[15]=[b("确定")])),_:1})]),default:t(()=>[l(L,{ref_key:"formRef",ref:v,model:n,rules:X,"label-width":"100px"},{default:t(()=>[l(s,{label:"姓名",prop:"name"},{default:t(()=>[l(u,{modelValue:n.name,"onUpdate:modelValue":e[4]||(e[4]=a=>n.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(s,{label:"性别",prop:"gender"},{default:t(()=>[l(_,{modelValue:n.gender,"onUpdate:modelValue":e[5]||(e[5]=a=>n.gender=a),placeholder:"请选择性别"},{default:t(()=>[l(g,{label:"男",value:"男"}),l(g,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"年龄",prop:"age"},{default:t(()=>[l(R,{modelValue:n.age,"onUpdate:modelValue":e[6]||(e[6]=a=>n.age=a),min:0,max:150},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号",prop:"phone"},{default:t(()=>[l(u,{modelValue:n.phone,"onUpdate:modelValue":e[7]||(e[7]=a=>n.phone=a),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(s,{label:"身份证号",prop:"idCard"},{default:t(()=>[l(u,{modelValue:n.idCard,"onUpdate:modelValue":e[8]||(e[8]=a=>n.idCard=a),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),l(s,{label:"地址",prop:"address"},{default:t(()=>[l(u,{modelValue:n.address,"onUpdate:modelValue":e[9]||(e[9]=a=>n.address=a),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},W=O(A,[["__scopeId","data-v-07f033e0"]]);export{W as default};
