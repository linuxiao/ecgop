import{_ as ye,f as be,e as he,a as w,r as m,m as ke,g as i,o as H,c as O,d as e,w as l,b as s,k as o,t as r,h as L,ah as M,p as xe,F as Ce,n as we,q as Ve,E as _,ac as j}from"./index-Dnu6zoKa.js";import{i as F,L as B}from"./index-CrL2ELlk.js";const Ee={class:"hospital-detail"},Te={class:"card-header"},De={class:"card-header"},Re={class:"card-header"},Se={class:"header-actions"},Ae={class:"card-header"},Ne={class:"stat-card"},$e={class:"stat-value"},He={class:"stat-chart",ref:"examChart"},Le={class:"stat-card"},Fe={class:"stat-value"},Be={class:"stat-chart",ref:"onlineChart"},Ge={class:"stat-card"},Ie={class:"stat-value"},Ue={class:"stat-chart",ref:"alertChart"},qe={class:"dialog-footer"},ze={style:{float:"right",color:"#8492a6","font-size":"13px"}},Oe={class:"dialog-footer"},Me={__name:"Detail",setup(je){const Z=be(),V=he(),p=w({id:Z.params.id,name:"第一人民医院",code:"H001",level:"三级甲等",status:"online",contact:"张三",phone:"13800138000",address:"北京市朝阳区",remark:"这是一家三甲医院"}),J=m([{id:1,deviceNo:"ECG001",model:"ECG-1200G",status:"online",lastActiveTime:"2024-01-20 10:30:00",todayExams:25,totalExams:1560},{id:2,deviceNo:"ECG002",model:"ECG-1200G",status:"online",lastActiveTime:"2024-01-20 10:25:00",todayExams:18,totalExams:1280},{id:3,deviceNo:"ECG003",model:"ECG-1000E",status:"offline",lastActiveTime:"2024-01-19 15:30:00",todayExams:12,totalExams:960}]),G=m("week"),E=w({totalExams:3800,onlineRate:85,alertCount:5}),g=m(!1),k=m("add"),T=m(null),c=w({deviceNo:"",model:"",remark:""}),K={deviceNo:[{required:!0,message:"请输入设备编号",trigger:"blur"},{pattern:/^[A-Z0-9]{3,10}$/,message:"3-10位大写字母或数字",trigger:"blur"}],model:[{required:!0,message:"请输入设备型号",trigger:"blur"}]},P=m([{id:1,name:"第三人民医院",level:"三级甲等",status:"online",diagnosisCount:1560,avgResponseTime:15},{id:2,name:"第四人民医院",level:"三级乙等",status:"online",diagnosisCount:980,avgResponseTime:20}]),b=m(!1),D=m(null),v=w({hospitalId:"",remark:""}),R=m(!1),S=m([]),Q={hospitalId:[{required:!0,message:"请选择医院",trigger:"change"}]},W=()=>{V.push(`/hospitals/${p.id}/edit`)},X=()=>{_.success("设备状态已更新")},Y=()=>{k.value="add",g.value=!0,Object.keys(c).forEach(n=>c[n]="")},ee=n=>{k.value="edit",g.value=!0,Object.assign(c,n)},te=n=>{V.push(`/devices/ecg/${n.deviceNo}`)},le=n=>{j.confirm("确定要删除该设备吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{_.success("删除成功")}).catch(()=>{})},ae=n=>{_.success(`正在测试设备 ${n.deviceNo} 的连接`)},oe=async()=>{if(T.value)try{await T.value.validate(),_.success(k.value==="add"?"添加成功":"更新成功"),g.value=!1}catch(n){console.error("Validation failed:",n)}},se=()=>{const n=F(document.querySelector(".stat-chart"));n.setOption({grid:{top:10,right:10,bottom:20,left:30},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{data:[120,200,150,80,70,110,130],type:"line",smooth:!0,symbol:"none",areaStyle:{color:new B(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}])},lineStyle:{color:"#409EFF"}}]});const t=F(document.querySelectorAll(".stat-chart")[1]);t.setOption({grid:{top:10,right:10,bottom:20,left:30},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{data:[95,93,98,90,92,95,89],type:"line",smooth:!0,symbol:"none",areaStyle:{color:new B(0,0,0,1,[{offset:0,color:"rgba(103,194,58,0.3)"},{offset:1,color:"rgba(103,194,58,0.1)"}])},lineStyle:{color:"#67C23A"}}]});const d=F(document.querySelectorAll(".stat-chart")[2]);d.setOption({grid:{top:10,right:10,bottom:20,left:30},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{data:[2,5,3,1,4,2,3],type:"line",smooth:!0,symbol:"none",areaStyle:{color:new B(0,0,0,1,[{offset:0,color:"rgba(245,108,108,0.3)"},{offset:1,color:"rgba(245,108,108,0.1)"}])},lineStyle:{color:"#F56C6C"}}]}),window.addEventListener("resize",()=>{n.resize(),t.resize(),d.resize()})},ne=async n=>{n?(R.value=!0,setTimeout(()=>{S.value=[{id:3,name:"第三人民医院",level:"三级甲等"},{id:4,name:"第四人民医院",level:"三级乙等"},{id:5,name:"第五人民医院",level:"二级甲等"}],R.value=!1},500)):S.value=[]},ie=()=>{b.value=!0,v.hospitalId="",v.remark=""},de=n=>{V.push(`/hospitals/${n.id}`)},re=n=>{_.info("查看判读统计功能开发中")},ue=n=>{j.confirm("确定要移除该判读医院吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{_.success("移除成功")}).catch(()=>{})},pe=async()=>{if(D.value)try{await D.value.validate(),_.success("添加成功"),b.value=!1}catch(n){console.error("Validation failed:",n)}};return ke(()=>{se()}),(n,t)=>{const d=i("el-button"),f=i("el-descriptions-item"),A=i("el-tag"),ce=i("el-descriptions"),x=i("el-card"),N=i("el-icon"),me=i("el-link"),u=i("el-table-column"),I=i("el-table"),U=i("el-radio-button"),fe=i("el-radio-group"),$=i("el-col"),ve=i("el-row"),C=i("el-input"),h=i("el-form-item"),q=i("el-form"),z=i("el-dialog"),_e=i("el-option"),ge=i("el-select");return H(),O("div",Ee,[e(x,{class:"detail-card",shadow:"never"},{header:l(()=>[s("div",Te,[t[11]||(t[11]=s("span",null,"基本信息",-1)),e(d,{type:"primary",onClick:W},{default:l(()=>t[10]||(t[10]=[o("编辑")])),_:1})])]),default:l(()=>[e(ce,{column:2,border:""},{default:l(()=>[e(f,{label:"医院名称"},{default:l(()=>[o(r(p.name),1)]),_:1}),e(f,{label:"医院代码"},{default:l(()=>[o(r(p.code),1)]),_:1}),e(f,{label:"医院等级"},{default:l(()=>[o(r(p.level),1)]),_:1}),e(f,{label:"状态"},{default:l(()=>[e(A,{type:p.status==="online"?"success":"danger"},{default:l(()=>[o(r(p.status==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"联系人"},{default:l(()=>[o(r(p.contact),1)]),_:1}),e(f,{label:"联系电话"},{default:l(()=>[o(r(p.phone),1)]),_:1}),e(f,{label:"地址",span:2},{default:l(()=>[o(r(p.address),1)]),_:1}),e(f,{label:"备注",span:2},{default:l(()=>[o(r(p.remark||"-"),1)]),_:1})]),_:1})]),_:1}),e(x,{class:"detail-card",shadow:"never"},{header:l(()=>[s("div",De,[t[13]||(t[13]=s("span",null,"判读医院",-1)),e(d,{type:"primary",onClick:ie},{default:l(()=>[e(N,null,{default:l(()=>[e(L(M))]),_:1}),t[12]||(t[12]=o(" 添加判读医院 "))]),_:1})])]),default:l(()=>[e(I,{data:P.value,style:{width:"100%"},border:""},{default:l(()=>[e(u,{prop:"name",label:"医院名称","min-width":"200"},{default:l(({row:a})=>[e(me,{type:"primary",onClick:y=>de(a)},{default:l(()=>[o(r(a.name),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{prop:"level",label:"医院等级",width:"120"}),e(u,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[e(A,{type:a.status==="online"?"success":"danger"},{default:l(()=>[o(r(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"diagnosisCount",label:"判读数量",width:"100",align:"center"}),e(u,{prop:"avgResponseTime",label:"平均响应时间",width:"120",align:"center"},{default:l(({row:a})=>[o(r(a.avgResponseTime)+"分钟 ",1)]),_:1}),e(u,{label:"操作",width:"150",fixed:"right"},{default:l(({row:a})=>[e(d,{link:"",type:"primary",onClick:y=>re(a)},{default:l(()=>t[14]||(t[14]=[o(" 判读统计 ")])),_:2},1032,["onClick"]),e(d,{link:"",type:"danger",onClick:y=>ue(a)},{default:l(()=>t[15]||(t[15]=[o(" 移除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(x,{class:"detail-card",shadow:"never"},{header:l(()=>[s("div",Re,[t[18]||(t[18]=s("span",null,"设备信息",-1)),s("div",Se,[e(d,{type:"success",onClick:X},{default:l(()=>[e(N,null,{default:l(()=>[e(L(xe))]),_:1}),t[16]||(t[16]=o(" 刷新状态 "))]),_:1}),e(d,{type:"primary",onClick:Y},{default:l(()=>[e(N,null,{default:l(()=>[e(L(M))]),_:1}),t[17]||(t[17]=o(" 添加设备 "))]),_:1})])])]),default:l(()=>[e(I,{data:J.value,style:{width:"100%"},border:""},{default:l(()=>[e(u,{prop:"deviceNo",label:"设备编号",width:"150"}),e(u,{prop:"model",label:"设备型号",width:"150"}),e(u,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[e(A,{type:a.status==="online"?"success":"danger"},{default:l(()=>[o(r(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"lastActiveTime",label:"最后活跃时间",width:"180"}),e(u,{prop:"todayExams",label:"今日检查",width:"100",align:"center"}),e(u,{prop:"totalExams",label:"累计检查",width:"100",align:"center"}),e(u,{label:"操作",width:"250",fixed:"right"},{default:l(({row:a})=>[e(d,{link:"",type:"primary",onClick:y=>ae(a)},{default:l(()=>t[19]||(t[19]=[o(" 测试连接 ")])),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",onClick:y=>te(a)},{default:l(()=>t[20]||(t[20]=[o(" 查看 ")])),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",onClick:y=>ee(a)},{default:l(()=>t[21]||(t[21]=[o(" 编辑 ")])),_:2},1032,["onClick"]),e(d,{link:"",type:"danger",onClick:y=>le(a),disabled:a.status==="online"},{default:l(()=>t[22]||(t[22]=[o(" 删除 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),e(x,{class:"detail-card",shadow:"never"},{header:l(()=>[s("div",Ae,[t[25]||(t[25]=s("span",null,"统计信息",-1)),e(fe,{modelValue:G.value,"onUpdate:modelValue":t[0]||(t[0]=a=>G.value=a),size:"small"},{default:l(()=>[e(U,{label:"week"},{default:l(()=>t[23]||(t[23]=[o("本周")])),_:1}),e(U,{label:"month"},{default:l(()=>t[24]||(t[24]=[o("本月")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[e(ve,{gutter:20},{default:l(()=>[e($,{span:8},{default:l(()=>[s("div",Ne,[t[26]||(t[26]=s("div",{class:"stat-title"},"检查总量",-1)),s("div",$e,r(E.totalExams),1),s("div",He,null,512)])]),_:1}),e($,{span:8},{default:l(()=>[s("div",Le,[t[27]||(t[27]=s("div",{class:"stat-title"},"设备在线率",-1)),s("div",Fe,r(E.onlineRate)+"%",1),s("div",Be,null,512)])]),_:1}),e($,{span:8},{default:l(()=>[s("div",Ge,[t[28]||(t[28]=s("div",{class:"stat-title"},"告警数量",-1)),s("div",Ie,r(E.alertCount),1),s("div",Ue,null,512)])]),_:1})]),_:1})]),_:1}),e(z,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=a=>g.value=a),title:k.value==="add"?"添加设备":"编辑设备",width:"600px"},{footer:l(()=>[s("span",qe,[e(d,{onClick:t[4]||(t[4]=a=>g.value=!1)},{default:l(()=>t[29]||(t[29]=[o("取消")])),_:1}),e(d,{type:"primary",onClick:oe},{default:l(()=>t[30]||(t[30]=[o(" 确认 ")])),_:1})])]),default:l(()=>[e(q,{ref_key:"deviceFormRef",ref:T,model:c,rules:K,"label-width":"100px"},{default:l(()=>[e(h,{label:"设备编号",prop:"deviceNo"},{default:l(()=>[e(C,{modelValue:c.deviceNo,"onUpdate:modelValue":t[1]||(t[1]=a=>c.deviceNo=a),placeholder:"请输入设备编号"},null,8,["modelValue"])]),_:1}),e(h,{label:"设备型号",prop:"model"},{default:l(()=>[e(C,{modelValue:c.model,"onUpdate:modelValue":t[2]||(t[2]=a=>c.model=a),placeholder:"请输入设备型号"},null,8,["modelValue"])]),_:1}),e(h,{label:"备注",prop:"remark"},{default:l(()=>[e(C,{modelValue:c.remark,"onUpdate:modelValue":t[3]||(t[3]=a=>c.remark=a),type:"textarea",rows:"3",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(z,{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=a=>b.value=a),title:"添加判读医院",width:"600px"},{footer:l(()=>[s("span",Oe,[e(d,{onClick:t[8]||(t[8]=a=>b.value=!1)},{default:l(()=>t[31]||(t[31]=[o("取消")])),_:1}),e(d,{type:"primary",onClick:pe},{default:l(()=>t[32]||(t[32]=[o(" 确认 ")])),_:1})])]),default:l(()=>[e(q,{ref_key:"diagnosisHospitalFormRef",ref:D,model:v,rules:Q,"label-width":"100px"},{default:l(()=>[e(h,{label:"医院名称",prop:"hospitalId"},{default:l(()=>[e(ge,{modelValue:v.hospitalId,"onUpdate:modelValue":t[6]||(t[6]=a=>v.hospitalId=a),placeholder:"请选择医院",filterable:"",remote:"","remote-method":ne,loading:R.value},{default:l(()=>[(H(!0),O(Ce,null,we(S.value,a=>(H(),Ve(_e,{key:a.id,label:a.name,value:a.id},{default:l(()=>[s("span",null,r(a.name),1),s("span",ze,r(a.level),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),e(h,{label:"备注",prop:"remark"},{default:l(()=>[e(C,{modelValue:v.remark,"onUpdate:modelValue":t[7]||(t[7]=a=>v.remark=a),type:"textarea",rows:"3",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ke=ye(Me,[["__scopeId","data-v-de9c92b8"]]);export{Ke as default};
