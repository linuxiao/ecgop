import{_ as T,r as y,a as q,m as P,a0 as j,g as u,o as f,c as C,d as t,w as e,b as s,k as o,t as n,q as A,F as x,n as G,D as J,E as z}from"./index-0Rub1XVr.js";const K={class:"monitor-page"},O={class:"card-header"},Q={class:"card-content"},R={class:"status-item"},W={class:"value success"},X={class:"status-item"},Y={class:"value danger"},Z={class:"card-header"},ee={class:"card-content"},te={class:"status-item"},le={class:"value warning"},se={class:"status-item"},ae={class:"value success"},ne={class:"card-header"},oe={class:"card-content"},ie={class:"status-item"},de={class:"value success"},ue={class:"status-item"},re={class:"value danger"},ce={class:"card-header"},_e={class:"card-content"},ve={class:"status-item"},pe={class:"value success"},me={class:"status-item"},fe={class:"value warning"},ge={class:"card-header"},be={key:1,class:"device-grid"},he={class:"device-info"},ye={class:"device-name"},we={class:"device-no"},ke={class:"device-location"},Ce={class:"device-status"},Me={class:"device-actions"},Ne={class:"card-header"},Ve={class:"alarm-item"},Ae={class:"alarm-title"},Ee={class:"alarm-content"},De={class:"alarm-device"},$e={__name:"Monitor",setup(xe){const M=y("list"),i=q({total:100,online:85,offline:15,todayAlarms:5,pendingAlarms:2,handledAlarms:3,todayChecks:50,normalChecks:48,abnormalChecks:2,todayMaintenance:8,completedMaintenance:6,pendingMaintenance:2}),h=y([{deviceNo:"ECG001",name:"心电图机1号",location:"心内科1诊室",status:"online",lastHeartbeat:"2024-03-14 15:30:00",ip:"192.168.1.100",mac:"00:11:22:33:44:55",firmwareVersion:"v1.2.3"},{deviceNo:"ECG002",name:"心电图机2号",location:"心内科2诊室",status:"offline",lastHeartbeat:"2024-03-14 14:30:00",ip:"192.168.1.101",mac:"00:11:22:33:44:56",firmwareVersion:"v1.2.3"}]),w=y([{id:1,title:"设备离线告警",content:"设备已超过30分钟未上报心跳",level:"critical",time:"2024-03-14 14:30:00",deviceNo:"ECG002",deviceName:"心电图机2号"},{id:2,title:"电量低告警",content:"设备电量低于20%",level:"warning",time:"2024-03-14 14:00:00",deviceNo:"ECG001",deviceName:"心电图机1号"}]),k=y(!1),c=y({}),E=r=>{c.value=r,k.value=!0},N=r=>{z.success(`开始检查设备：${r.deviceNo}`)},B=()=>{z("查看所有告警")};let D;return P(()=>{D=setInterval(()=>{if(h.value.forEach(r=>{Math.random()>.8&&(r.status=r.status==="online"?"offline":"online",r.lastHeartbeat=new Date().toLocaleString())}),i.online=h.value.filter(r=>r.status==="online").length,i.offline=h.value.length-i.online,Math.random()>.7){const r={id:Date.now(),title:Math.random()>.5?"设备离线告警":"电量低告警",content:Math.random()>.5?"设备已超过30分钟未上报心跳":"设备电量低于20%",level:Math.random()>.5?"critical":"warning",time:new Date().toLocaleString(),deviceNo:Math.random()>.5?"ECG001":"ECG002",deviceName:Math.random()>.5?"心电图机1号":"心电图机2号"};w.value.unshift(r),w.value.length>10&&w.value.pop(),i.todayAlarms++,i.pendingAlarms++}},3e4)}),j(()=>{clearInterval(D)}),(r,l)=>{const _=u("el-tag"),d=u("el-col"),g=u("el-row"),p=u("el-card"),$=u("el-radio-button"),H=u("el-radio-group"),b=u("el-table-column"),m=u("el-button"),L=u("el-table"),I=u("el-timeline-item"),S=u("el-timeline"),v=u("el-descriptions-item"),U=u("el-descriptions"),F=u("el-dialog");return f(),C("div",K,[t(g,{gutter:16,class:"statistics"},{default:e(()=>[t(d,{span:6},{default:e(()=>[t(p,{shadow:"hover"},{header:e(()=>[s("div",O,[l[4]||(l[4]=s("span",null,"设备总数",-1)),t(_,{type:"info"},{default:e(()=>[o(n(i.total),1)]),_:1})])]),default:e(()=>[s("div",Q,[t(g,null,{default:e(()=>[t(d,{span:12},{default:e(()=>[s("div",R,[l[5]||(l[5]=s("div",{class:"label"},"在线",-1)),s("div",W,n(i.online),1)])]),_:1}),t(d,{span:12},{default:e(()=>[s("div",X,[l[6]||(l[6]=s("div",{class:"label"},"离线",-1)),s("div",Y,n(i.offline),1)])]),_:1})]),_:1})])]),_:1})]),_:1}),t(d,{span:6},{default:e(()=>[t(p,{shadow:"hover"},{header:e(()=>[s("div",Z,[l[7]||(l[7]=s("span",null,"今日告警",-1)),t(_,{type:"danger"},{default:e(()=>[o(n(i.todayAlarms),1)]),_:1})])]),default:e(()=>[s("div",ee,[t(g,null,{default:e(()=>[t(d,{span:12},{default:e(()=>[s("div",te,[l[8]||(l[8]=s("div",{class:"label"},"未处理",-1)),s("div",le,n(i.pendingAlarms),1)])]),_:1}),t(d,{span:12},{default:e(()=>[s("div",se,[l[9]||(l[9]=s("div",{class:"label"},"已处理",-1)),s("div",ae,n(i.handledAlarms),1)])]),_:1})]),_:1})])]),_:1})]),_:1}),t(d,{span:6},{default:e(()=>[t(p,{shadow:"hover"},{header:e(()=>[s("div",ne,[l[10]||(l[10]=s("span",null,"今日检查",-1)),t(_,{type:"success"},{default:e(()=>[o(n(i.todayChecks),1)]),_:1})])]),default:e(()=>[s("div",oe,[t(g,null,{default:e(()=>[t(d,{span:12},{default:e(()=>[s("div",ie,[l[11]||(l[11]=s("div",{class:"label"},"正常",-1)),s("div",de,n(i.normalChecks),1)])]),_:1}),t(d,{span:12},{default:e(()=>[s("div",ue,[l[12]||(l[12]=s("div",{class:"label"},"异常",-1)),s("div",re,n(i.abnormalChecks),1)])]),_:1})]),_:1})])]),_:1})]),_:1}),t(d,{span:6},{default:e(()=>[t(p,{shadow:"hover"},{header:e(()=>[s("div",ce,[l[13]||(l[13]=s("span",null,"今日维护",-1)),t(_,{type:"warning"},{default:e(()=>[o(n(i.todayMaintenance),1)]),_:1})])]),default:e(()=>[s("div",_e,[t(g,null,{default:e(()=>[t(d,{span:12},{default:e(()=>[s("div",ve,[l[14]||(l[14]=s("div",{class:"label"},"已完成",-1)),s("div",pe,n(i.completedMaintenance),1)])]),_:1}),t(d,{span:12},{default:e(()=>[s("div",me,[l[15]||(l[15]=s("div",{class:"label"},"待处理",-1)),s("div",fe,n(i.pendingMaintenance),1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(g,{gutter:16,class:"monitor-content"},{default:e(()=>[t(d,{span:16},{default:e(()=>[t(p,{class:"device-status"},{header:e(()=>[s("div",ge,[l[18]||(l[18]=s("span",null,"设备状态",-1)),t(H,{modelValue:M.value,"onUpdate:modelValue":l[0]||(l[0]=a=>M.value=a),size:"small"},{default:e(()=>[t($,{label:"list"},{default:e(()=>l[16]||(l[16]=[o("列表")])),_:1}),t($,{label:"grid"},{default:e(()=>l[17]||(l[17]=[o("网格")])),_:1})]),_:1},8,["modelValue"])])]),default:e(()=>[M.value==="list"?(f(),A(L,{key:0,data:h.value,style:{width:"100%"}},{default:e(()=>[t(b,{prop:"deviceNo",label:"设备编号",width:"120"}),t(b,{prop:"name",label:"设备名称",width:"150"}),t(b,{prop:"location",label:"位置"}),t(b,{prop:"status",label:"状态",width:"100"},{default:e(({row:a})=>[t(_,{type:a.status==="online"?"success":"danger"},{default:e(()=>[o(n(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),t(b,{prop:"lastHeartbeat",label:"最后心跳",width:"180"}),t(b,{label:"操作",width:"150"},{default:e(({row:a})=>[t(m,{link:"",type:"primary",onClick:V=>E(a)},{default:e(()=>l[19]||(l[19]=[o("详情")])),_:2},1032,["onClick"]),t(m,{link:"",type:"warning",onClick:V=>N(a)},{default:e(()=>l[20]||(l[20]=[o("检查")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(f(),C("div",be,[(f(!0),C(x,null,G(h.value,a=>(f(),A(p,{key:a.deviceNo,class:J(["device-card",{offline:a.status==="offline"}]),shadow:"hover"},{default:e(()=>[s("div",he,[s("div",ye,n(a.name),1),s("div",we,n(a.deviceNo),1),s("div",ke,n(a.location),1),s("div",Ce,[t(_,{type:a.status==="online"?"success":"danger",size:"small"},{default:e(()=>[o(n(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),s("div",Me,[t(m,{link:"",type:"primary",onClick:V=>E(a)},{default:e(()=>l[21]||(l[21]=[o("详情")])),_:2},1032,["onClick"]),t(m,{link:"",type:"warning",onClick:V=>N(a)},{default:e(()=>l[22]||(l[22]=[o("检查")])),_:2},1032,["onClick"])])])]),_:2},1032,["class"]))),128))]))]),_:1})]),_:1}),t(d,{span:8},{default:e(()=>[t(p,{class:"alarm-list"},{header:e(()=>[s("div",Ne,[l[24]||(l[24]=s("span",null,"实时告警",-1)),t(m,{link:"",type:"primary",onClick:B},{default:e(()=>l[23]||(l[23]=[o("查看全部")])),_:1})])]),default:e(()=>[t(S,null,{default:e(()=>[(f(!0),C(x,null,G(w.value,a=>(f(),A(I,{key:a.id,type:a.level==="critical"?"danger":a.level==="warning"?"warning":"info",timestamp:a.time,size:"large"},{default:e(()=>[s("div",Ve,[s("div",Ae,[o(n(a.title)+" ",1),t(_,{type:a.level==="critical"?"danger":a.level==="warning"?"warning":"info",size:"small"},{default:e(()=>[o(n(a.level==="critical"?"严重":a.level==="warning"?"警告":"提示"),1)]),_:2},1032,["type"])]),s("div",Ee,n(a.content),1),s("div",De," 设备："+n(a.deviceNo)+" - "+n(a.deviceName),1)])]),_:2},1032,["type","timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),t(F,{modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=a=>k.value=a),title:"设备详情",width:"800px"},{footer:e(()=>[t(m,{onClick:l[1]||(l[1]=a=>k.value=!1)},{default:e(()=>l[25]||(l[25]=[o("关闭")])),_:1}),t(m,{type:"primary",onClick:l[2]||(l[2]=a=>N(c.value))},{default:e(()=>l[26]||(l[26]=[o("设备检查")])),_:1})]),default:e(()=>[t(U,{column:2,border:""},{default:e(()=>[t(v,{label:"设备编号"},{default:e(()=>[o(n(c.value.deviceNo),1)]),_:1}),t(v,{label:"设备名称"},{default:e(()=>[o(n(c.value.name),1)]),_:1}),t(v,{label:"位置"},{default:e(()=>[o(n(c.value.location),1)]),_:1}),t(v,{label:"状态"},{default:e(()=>[t(_,{type:c.value.status==="online"?"success":"danger"},{default:e(()=>[o(n(c.value.status==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),_:1}),t(v,{label:"最后心跳"},{default:e(()=>[o(n(c.value.lastHeartbeat),1)]),_:1}),t(v,{label:"IP地址"},{default:e(()=>[o(n(c.value.ip),1)]),_:1}),t(v,{label:"MAC地址"},{default:e(()=>[o(n(c.value.mac),1)]),_:1}),t(v,{label:"固件版本"},{default:e(()=>[o(n(c.value.firmwareVersion),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ze=T($e,[["__scopeId","data-v-a4fd9a25"]]);export{ze as default};
